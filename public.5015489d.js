let e={ROCK:{id:"rock",beats:["scissors"],isStandard:!0,text:"Rock",icon:"ðŸª¨"},PAPER:{id:"paper",beats:["rock"],isStandard:!0,text:"Paper",icon:"ðŸ“„"},SCISSORS:{id:"scissors",beats:["paper"],isStandard:!0,text:"Scissors",icon:"âœ‚ï¸"},TARA:{id:"tara",beats:["rock","paper","scissors"],isStandard:!1,text:"Tara",icon:"â­"}},t=Object.values(e),s=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,t.id])),a=t.map(e=>({name:e.id,beats:e.beats})),r=t.map(e=>e.id),o=new Map(a.map(e=>[e.name,e])),i=a.filter((e,s)=>t[s].isStandard),n=i.map(e=>e.name);i.map(e=>[e.name,e]);let l=t.map(e=>({id:e.id,text:e.text,icon:e.icon})),m=Object.fromEntries(t.map(e=>[e.id,e.text])),h="player",u="computer",c=[0,50,100,null],d={matchRoundNumber:1,playerHealth:100,computerHealth:100},g={player:"playerHealth",computer:"computerHealth"},M="Score",p="TaraCount",v="MostCommonMove",C="MoveCounts",S="roundNumber",y="globalMatchNumber",_="currentMatch",b={[s.ROCK]:0,[s.PAPER]:0,[s.SCISSORS]:0};class w{formatKey(e,t){return`${e}${t}`}safelySetItem(e,t){try{localStorage.setItem(e,t)}catch(t){console.warn(`LocalStorage Error: Failed to save "${e}".`,t)}}getScore(e){let t=this.formatKey(e,M);return parseInt(localStorage.getItem(t)||"0",10)}getTaraCount(e){let t=this.formatKey(e,p);return parseInt(localStorage.getItem(t)||"0",10)}getMostCommonMove(e){let t=this.formatKey(e,v),s=localStorage.getItem(t);return s&&n.includes(s)?s:null}getMoveCounts(e){let t=this.formatKey(e,C);try{let e=localStorage.getItem(t);return e?JSON.parse(e):b}catch(e){return console.warn(`LocalStorage Error: Failed to parse "${t}".`,e),b}}getGlobalMatchNumber(){let e=localStorage.getItem(y);return null!==e?parseInt(e,10):null}getMatch(){try{let e=localStorage.getItem(_);return e?JSON.parse(e):null}catch(e){return console.warn("LocalStorage Error: Failed to parse currentMatch.",e),null}}getOldGlobalRoundNumber(){let e=localStorage.getItem(S);if(null===e)return null;let t=parseInt(e,10);return isNaN(t)?(console.warn(`Legacy 'roundNumber' in localStorage (${e}) is not a valid number. Skipping migration.`),null):t}setScore(e,t){let s=this.formatKey(e,M);this.safelySetItem(s,t.toString())}setTaraCount(e,t){let s=this.formatKey(e,p);this.safelySetItem(s,t.toString())}setMostCommonMove(e,t){let s=this.formatKey(e,v);t?this.safelySetItem(s,t):localStorage.removeItem(s)}setMoveCounts(e,t){let s=this.formatKey(e,C);this.safelySetItem(s,JSON.stringify(t))}setGlobalMatchNumber(e){e?this.safelySetItem(y,e.toString()):localStorage.removeItem(y)}setMatch(e){e?this.safelySetItem(_,JSON.stringify(e)):localStorage.removeItem(_)}removeScore(e){let t=this.formatKey(e,M);localStorage.removeItem(t)}removeTaraCount(e){let t=this.formatKey(e,p);localStorage.removeItem(t)}removeMostCommonMove(e){let t=this.formatKey(e,v);localStorage.removeItem(t)}removeMoveCounts(e){let t=this.formatKey(e,C);localStorage.removeItem(t)}removeHistory(e){let t=this.formatKey(e,"History");localStorage.removeItem(t)}removeGlobalMatchNumber(){localStorage.removeItem(y)}removeOldGlobalRoundNumber(){localStorage.removeItem(S)}}class V{state={scores:{player:0,computer:0},moves:{player:null,computer:null},taras:{player:0,computer:0},mostCommonMove:{player:null,computer:null},moveCounts:{player:{rock:0,paper:0,scissors:0},computer:{rock:0,paper:0,scissors:0}},globalMatchNumber:null,currentMatch:null};gameStorage;constructor(e=new w){this.gameStorage=e,this.state.scores.player=this.gameStorage.getScore(h),this.state.scores.computer=this.gameStorage.getScore(u),this.state.taras.player=this.gameStorage.getTaraCount(h),this.state.taras.computer=this.gameStorage.getTaraCount(u),this.state.mostCommonMove.player=this.gameStorage.getMostCommonMove(h),this.state.mostCommonMove.computer=this.gameStorage.getMostCommonMove(u),this.state.moveCounts.player=this.gameStorage.getMoveCounts(h),this.state.moveCounts.computer=this.gameStorage.getMoveCounts(u),this._loadOrMigrateMatchState()}doesMoveBeat(e,t){return o.get(e)?.beats.includes(t)??!1}handleRoundWin(e,t){if(this.isStandardMove(t)){let t=this.getTaraCount(e);t<3&&this.setTaraCount(e,t+1)}}evaluateRound(){let e=this.getPlayerMove(),t=this.getComputerMove();return null===e||null===t?"Invalid round":(this.handleTaraMove(h,e),this.handleTaraMove(u,t),e===t)?"It's a tie!":this.doesMoveBeat(e,t)?(this.handleRoundWin(h,e),this.decrementHealth(u),"You win the round!"):(this.handleRoundWin(u,t),this.decrementHealth(h),"Computer wins the round!")}isMatchActive(){return null!==this.gameStorage.getMatch()}setScore(e,t){this.state.scores[e]=t,this.gameStorage.setScore(e,t)}getScore(e){return this.state.scores[e]}resetScore(e){this.state.scores[e]=0,this.gameStorage.removeScore(e)}setPlayerScore(e){this.setScore(h,e)}setComputerScore(e){this.setScore(u,e)}getPlayerScore(){return this.getScore(h)}getComputerScore(){return this.getScore(u)}resetScores(){this.resetScore(h),this.resetScore(u)}isStandardMove(e){return"string"==typeof e&&e!==s.TARA}setMove(e,t){this.state.moves[e]=t}getMove(e){return this.state.moves[e]}determineMostCommonMove(e){let t=null,s=0,a=!1;for(let[r,o]of Object.entries(e))o>s?(s=o,t=r,a=!1):o===s&&0!==o&&(a=!0);return a?null:t}resetMostCommonMove(e){this.state.mostCommonMove[e]=null,this.gameStorage.removeMostCommonMove(e)}setMostCommonMove(e,t){let s=this.determineMostCommonMove(t);this.state.mostCommonMove[e]=s,this.gameStorage.setMostCommonMove(e,s)}getMostCommonMove(e){return this.state.mostCommonMove[e]}getAvailableMoves(e){return e?r:n}getBaseWeights(){return{[s.ROCK]:1,[s.PAPER]:1,[s.SCISSORS]:1,[s.TARA]:0}}getTaraWeight(e){if(!e.includes(s.TARA))return null;let{player:t,computer:a}=this.state.scores,r=t-a;return r>0?Math.min(3+r,10):r<0?1:2}getStandardMoveWeights(){let e={[s.ROCK]:1,[s.PAPER]:1,[s.SCISSORS]:1},t=this.state.mostCommonMove.player;if(!t)return e;let a={[s.ROCK]:s.PAPER,[s.PAPER]:s.SCISSORS,[s.SCISSORS]:s.ROCK}[t];return{[s.ROCK]:a===s.ROCK?5:2,[s.PAPER]:a===s.PAPER?5:2,[s.SCISSORS]:a===s.SCISSORS?5:2}}chooseWeightedRandomMove(e,t){let s=e.flatMap(e=>Array(t[e]).fill(e)),a=Math.floor(Math.random()*s.length);return s[a]}getComputerMoveWeights(e){let t=this.getBaseWeights(),a=this.getTaraWeight(e),r=this.getStandardMoveWeights();return{...t,...r,...null!==a?{[s.TARA]:a}:{}}}getWeightedComputerMove(){let e=this.getComputerTaraCount()>0,t=this.getAvailableMoves(e),s=this.getComputerMoveWeights(t);return this.chooseWeightedRandomMove(t,s)}setPlayerMove(e){this.setMove(h,e)}getPlayerMove(){return this.getMove(h)}setComputerMove(e){this.setMove(u,e)}getComputerMove(){return this.getMove(u)}resetMoves(){this.setPlayerMove(null),this.setComputerMove(null)}chooseComputerMove(){let e=this.getWeightedComputerMove();this.registerComputerMove(e)}registerPlayerMove(e){this.setPlayerMove(e),this.isStandardMove(e)&&(this.setMoveCounts(h,e),this.setPlayerMostCommonMove())}registerComputerMove(e){this.setComputerMove(e),this.isStandardMove(e)&&(this.setMoveCounts(u,e),this.setComputerMostCommonMove())}setPlayerMostCommonMove(){let e=this.getMoveCounts(h);this.setMostCommonMove(h,e)}setComputerMostCommonMove(){let e=this.getMoveCounts(u);this.setMostCommonMove(u,e)}resetMostCommonMoves(){this.resetMostCommonMove(h),this.resetMostCommonMove(u)}getPlayerMostCommonMove(){return this.getMostCommonMove(h)}getComputerMostCommonMove(){return this.getMostCommonMove(u)}setMoveCounts(e,t){this.state.moveCounts[e][t]=(this.state.moveCounts[e][t]||0)+1,this.gameStorage.setMoveCounts(e,this.state.moveCounts[e])}resetMoveCounts(e){this.state.moveCounts[e]={rock:0,paper:0,scissors:0},this.gameStorage.removeMoveCounts(e)}getMoveCounts(e){return this.state.moveCounts[e]}resetBothMoveCounts(){this.resetMoveCounts(h),this.resetMoveCounts(u)}showMostCommonMove(){return null!==this.getPlayerMostCommonMove()||null!==this.getComputerMostCommonMove()}resetHistory(e){this.gameStorage.removeHistory(e)}resetHistories(){this.resetHistory(h),this.resetHistory(u)}getRoundNumber(){return this.state.currentMatch?.matchRoundNumber??1}setRoundNumber(e){this.state.currentMatch&&(this.state.currentMatch.matchRoundNumber=e,this.gameStorage.setMatch(this.state.currentMatch))}increaseRoundNumber(){let e=this.getRoundNumber();this.setRoundNumber(e+1)}decrementTaraCount(e){let t=this.getTaraCount(e);t>1?this.setTaraCount(e,t-1):1===t&&this.resetTaraCount(e)}handleTaraMove(e,t){t===s.TARA&&(this.getTaraCount(e)>0?this.decrementTaraCount(e):this.setMove(e,s.ROCK))}setTaraCount(e,t){this.state.taras[e]=t,this.gameStorage.setTaraCount(e,t)}getTaraCount(e){return this.state.taras[e]}resetTaraCount(e){this.state.taras[e]=0,this.gameStorage.removeTaraCount(e)}setPlayerTaraCount(e){this.setTaraCount(h,e)}setComputerTaraCount(e){this.setTaraCount(u,e)}resetTaras(){this.resetTaraCount(h),this.resetTaraCount(u)}getPlayerTaraCount(){return this.getTaraCount(h)}getComputerTaraCount(){return this.getTaraCount(u)}taraIsEnabled(){return this.getTaraCount(h)>0}handleMatchWin(){let e=this.getMatchWinner();return this.setScore(e,this.getScore(e)+1),e}setMatch(e){this.state.currentMatch=e,this.gameStorage.setMatch(e)}setMatchNumber(e){this.state.globalMatchNumber=e,this.gameStorage.setGlobalMatchNumber(e)}setDefaultMatchData(){this.isMatchActive()||this.setMatch({...d})}resetMatchData(){this.state.currentMatch=null,this.gameStorage.setMatch(null),this.setMatchNumber(null)}getMatchNumber(){return this.state.globalMatchNumber??1}isMatchOver(){return this.isDefeated(h)||this.isDefeated(u)}getMatchWinner(){return this.isDefeated(h)?u:h}incrementMatchNumber(){let e=this.getMatchNumber();this.setMatchNumber(e+1)}_loadOrMigrateMatchState(){if(this.isMatchActive())return void this._loadExistingMatchState();let e=this.gameStorage.getOldGlobalRoundNumber();null!==e&&e>0&&this._migrateOldData(e)}_loadExistingMatchState(){this.state.globalMatchNumber=this.gameStorage.getGlobalMatchNumber(),this.state.currentMatch=this.gameStorage.getMatch()}_migrateOldData(e){this.setMatch({matchRoundNumber:e,playerHealth:100,computerHealth:100,initialHealth:100,damagePerLoss:50}),this.gameStorage.removeOldGlobalRoundNumber(),this.state.globalMatchNumber=1,this.gameStorage.setGlobalMatchNumber(this.state.globalMatchNumber)}getHealthKey(e){return g[e]}getHealth(e){let t=this.state.currentMatch;if(!t)return null;let s=t[this.getHealthKey(e)];return c.includes(s)?s:null}decrementHealth(e){let t=this.state.currentMatch;if(!t)return!1;let s=this.getHealthKey(e),a=t[s];return!(a<=0)&&(t[s]=Math.max(0,a-50),!0)}isDefeated(e){let t=this.getHealth(e);return null!==t&&t<=0}}class E{model;announcementView;controlsView;gameView;menuView;moveRevealView;progressView;statsView;statusView;constructor(e,t){this.model=e,this.announcementView=t.announcementView,this.controlsView=t.controlsView,this.gameView=t.gameView,this.menuView=t.menuView,this.moveRevealView=t.moveRevealView,this.progressView=t.progressView,this.statsView=t.statsView,this.statusView=t.statusView}updateControlsView(){this.controlsView.render({playerMove:this.model.getPlayerMove(),isMatchOver:this.model.isMatchOver(),taraIsEnabled:this.model.taraIsEnabled(),moves:l})}updateProgressView(e){this.progressView.update({matchNumber:this.model.getMatchNumber(),roundNumber:this.model.getRoundNumber(),isVisible:e.isVisible})}updateScoreView(){this.statsView.updateScores(this.model.getPlayerScore(),this.model.getComputerScore())}updateTaraView(){this.statsView.updateTaraCounts(this.model.getPlayerTaraCount(),this.model.getComputerTaraCount())}updateMostCommonMoveView(){this.statsView.updateMostCommonMoves(this.model.getPlayerMostCommonMove(),this.model.getComputerMostCommonMove())}updateHealthView(){let e=this.model.getHealth(h),t=this.model.getHealth(u);this.statsView.updateHealthBar(h,e),this.statsView.updateHealthBar(u,t)}async startGame(){this.model.setDefaultMatchData(),this.gameView.toggleVisibility(!0),this.updateProgressView({isVisible:!0}),this.menuView.toggleMenuVisibility(!1),this.statsView.toggleGameStatsVisibility(!0),this.statusView.setMessage("Get ready..."),this.updateControlsView(),this.updateHealthView(),this.controlsView.toggleVisibility(!0),await this.controlsView.flipAll(!0),this.statusView.setMessage("Choose your attack!")}endRound(){let e=this.model.getPlayerMove(),t=this.model.getComputerMove(),s=this.model.evaluateRound(),a=this.model.isMatchOver();this.updateHealthView();let r=s.toUpperCase();if(a){let e=this.model.handleMatchWin();r=`${e.toUpperCase()} WON THE MATCH!`,this.model.incrementMatchNumber(),this.model.setMatch(null)}else this.model.increaseRoundNumber();this.statusView.setMessage(`You played ${m[e]}. Computer played ${m[t]}.`),this.announcementView.setMessage(r),this.controlsView.render({playerMove:this.model.getPlayerMove(),isMatchOver:a,taraIsEnabled:this.model.taraIsEnabled(),moves:l}),this.updateScoreView(),this.updateTaraView(),this.updateMostCommonMoveView()}async handleNextRound(){this.model.resetMoves(),this.model.setDefaultMatchData(),this.updateHealthView(),this.updateProgressView({isVisible:!0}),this.announcementView.setMessage(""),this.moveRevealView.toggleVisibility(!1),this.updateControlsView(),this.statusView.setMessage("Prepare your next move..."),await this.controlsView.flipAll(!0),this.statusView.setMessage("Choose your attack!")}async resetGameState(){this.model.resetScores(),this.model.resetMoves(),this.model.resetTaras(),this.model.resetHistories(),this.model.resetBothMoveCounts(),this.model.resetMostCommonMoves(),this.model.resetMatchData();let e=this.model.isMatchActive();this.updateScoreView(),this.updateTaraView(),this.updateHealthView(),this.updateMostCommonMoveView(),this.updateControlsView(),this.moveRevealView.toggleVisibility(!1),this.controlsView.toggleVisibility(!1),this.menuView.updateMenu({isMatchActive:e}),this.announcementView.setMessage("")}async handlePlayerMove(e){this.model.registerPlayerMove(e),this.model.chooseComputerMove(),this.statusView.setMessage("Locking in move..."),await this.controlsView.flipAll(!1),this.moveRevealView.render({playerMoveId:this.model.getPlayerMove(),computerMoveId:this.model.getComputerMove()}),this.statusView.setMessage("Revealing moves..."),this.moveRevealView.toggleVisibility(!0),await this.moveRevealView.flipCards();let t=this.model.getPlayerMove(),s=this.model.getComputerMove();if(t&&s&&t!==s){let e=this.model.doesMoveBeat(t,s);await this.moveRevealView.highlightWinner(e?"player":"computer")}else await new Promise(e=>requestAnimationFrame(e));this.endRound()}async initialize(){let e=this.model.isMatchActive();this.menuView.render({isMatchActive:e}),this.progressView.render({matchNumber:this.model.getMatchNumber(),roundNumber:this.model.getRoundNumber(),isVisible:!1}),this.announcementView.render({message:""}),this.statusView.render({message:""}),this.updateControlsView(),this.updateScoreView(),this.updateTaraView(),this.updateMostCommonMoveView(),this.menuView.updateMenu({isMatchActive:e}),this.statsView.toggleGameStatsVisibility(!1),this.controlsView.toggleVisibility(!1),this.menuView.toggleMenuVisibility(!0),this.menuView.bindStartMatch(()=>this.startGame()),this.menuView.bindResetGame(()=>this.resetGameState()),this.controlsView.bindPlayerMove(e=>this.handlePlayerMove(e)),this.controlsView.bindNextRound(()=>this.handleNextRound())}}class f{_data;_parentElement;render(e){if(!e)return;this._data=e;let t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}update(e){this._data=e;let t=this._generateMarkup(),s=Array.from(document.createRange().createContextualFragment(t).querySelectorAll("*")),a=Array.from(this._parentElement.querySelectorAll("*"));s.forEach((e,t)=>{let s=a[t];e.isEqualNode(s)||e.firstChild?.nodeValue?.trim()===""||e.firstChild?.nodeValue?.trim()===void 0||(s.textContent=e.textContent),e.isEqualNode(s)||(Array.from(e.attributes).forEach(e=>s.setAttribute(e.name,e.value)),Array.from(s.attributes).forEach(t=>{e.hasAttribute(t.name)||s.removeAttribute(t.name)}))})}_clear(){this._parentElement.innerHTML=""}_getElement(e){let t=document.getElementById(e);if(!t)throw Error(`Element #${e} not found.`);return t}_toggleVisibility(e,t){e.classList.toggle("hidden",!t),t?e.removeAttribute("inert"):e.setAttribute("inert","")}_waitForAnimation(e){return new Promise(t=>{let s=parseFloat(getComputedStyle(e).transitionDuration);if(!s||0===s)return void t();let a=s=>{s.target===e&&(e.removeEventListener("transitionend",a),t())};e.addEventListener("transitionend",a)})}}class R extends f{_messageElement=null;render(e){this._parentElement=this._getElement("announcement-container"),super.render(e),this._messageElement=this._parentElement.querySelector("#announcement")}_generateMarkup(){return`<h2 id="announcement">${this._data.message}</h2>`}setMessage(e){if(this._data={message:e},this._messageElement)this._messageElement.textContent=e;else{let t=document.getElementById("announcement");t&&(t.textContent=e)}}}class N extends f{_moveHandler;_nextRoundHandler;_isFaceUp=!1;render(e){this._parentElement=this._getElement("game-controls"),super.render(e),this._setupListeners()}async flipAll(e){this._isFaceUp=e;let t=this._parentElement.querySelectorAll(".card-inner");0!==t.length&&(t[0].offsetHeight,t.forEach(t=>{e?t.classList.add("is-flipped"):t.classList.remove("is-flipped")}),await this._waitForAnimation(t[0]))}_generateMarkup(){let{playerMove:e,isMatchOver:t,moves:s,taraIsEnabled:a}=this._data;return e?`
    <div id="progression-zone" aria-live="polite">
      <button id="play-again" class="btn-primary">
        ${t?"Start New Match":"Next Round"}
      </button>
    </div>`:`
      <div id="choices" role="group" aria-label="Select your move">
        ${s.map(e=>{let t="tara"===e.id&&!a,s=this._isFaceUp?"is-flipped":"";return`
            <button id="${e.id}" class="card-button" ${t?"disabled":""}>
              <div class="card-inner ${s}">
                <div class="card-back player-theme"></div>
                <div class="card-front">
                  <span class="icon" aria-hidden="true">${e.icon}</span>
                  <span class="label">${e.text}</span>
                </div>
              </div>
            </button>`}).join("")}
      </div>`}toggleVisibility(e){this._parentElement||(this._parentElement=this._getElement("game-controls")),this._toggleVisibility(this._parentElement,e)}bindPlayerMove(e){this._moveHandler=e}bindNextRound(e){this._nextRoundHandler=e}_setupListeners(){this._parentElement.onclick=e=>{let t=e.target,s=t.closest(".card-button"),a=t.closest("#play-again");s&&this._moveHandler&&this._moveHandler(s.id),a&&this._nextRoundHandler&&this._nextRoundHandler()}}}class T extends f{_ensureParentElement(){this._parentElement&&document.body.contains(this._parentElement)||(this._parentElement=this._getElement("game-container"))}toggleVisibility(e){this._ensureParentElement(),this._toggleVisibility(this._parentElement,e)}_generateMarkup(){return""}}class P extends f{_startBtn;_resetBtn;_generateMarkup(){let e=this._data.isMatchActive?"Continue Match":"Start Match";return`
      <div class="menu-content">
        <h1 id="game-title" class="title-large">Rock Paper Scissors Tara</h1>
        <div class="menu-controls">
          <button id="start" class="btn-primary">${e}</button>
          <button id="reset-game-state" class="btn-secondary">Reset Game State</button>
        </div>
      </div>
    `}_ensureParentElement(){this._parentElement&&document.body.contains(this._parentElement)||(this._parentElement=this._getElement("main-menu"))}render(e){this._ensureParentElement(),super.render(e),this._startBtn=this._getElement("start"),this._resetBtn=this._getElement("reset-game-state")}bindStartMatch(e){this._startBtn?.addEventListener("click",t=>{t.preventDefault(),e()})}bindResetGame(e){this._resetBtn?.addEventListener("click",t=>{t.preventDefault(),e()})}toggleMenuVisibility(e){this._ensureParentElement(),this._toggleVisibility(this._parentElement,e)}updateMenu(e){this._data={...this._data,...e},this.update(this._data),this._startBtn=this._getElement("start"),this._resetBtn=this._getElement("reset-game-state")}}class A extends f{_parentElement=document.getElementById("move-reveal");_generateMarkup(){let{playerMoveId:e,computerMoveId:t}=this._data,s=l.find(t=>t.id===e),a=l.find(e=>e.id===t);if(!s||!a)return"";let r=(e,t)=>`
      <div class="card" data-id="${e.id}">
        <div class="card-inner">
          <div class="card-back ${t}"></div> <div class="card-front">
            <span class="icon">${e.icon}</span>
            <span class="label">${e.text}</span>
          </div>
        </div>
      </div>
    `;return`
      ${r(s,"player-theme")}
      <span class="vs-label">VS</span>
      ${r(a,"computer-theme")}
    `}toggleVisibility(e){e||this._parentElement.querySelectorAll(".card").forEach(e=>{e.classList.remove("winner-highlight")}),this._toggleVisibility(this._parentElement,e)}async flipCards(){let e=this._parentElement.querySelectorAll(".card-inner");0!==e.length&&(e[0].offsetHeight,e.forEach(e=>e.classList.add("is-flipped")),await this._waitForAnimation(e[0]))}async highlightWinner(e){let t=this._parentElement.querySelector(e===h?".player-theme":".computer-theme")?.closest(".card");t&&(t.classList.add("winner-highlight"),await this._waitForAnimation(t))}}class H extends f{_ensureParentElement(){this._parentElement&&document.body.contains(this._parentElement)||(this._parentElement=this._getElement("game-progress-container"))}_generateMarkup(){return`
      <h2 id="match">Match ${this._data.matchNumber}</h1>
      <h1 id="round">Round ${this._data.roundNumber}</h2>
    `}render(e){this._ensureParentElement(),super.render(e),this._toggleVisibility(this._parentElement,e.isVisible)}update(e){this._ensureParentElement(),super.update(e),this._toggleVisibility(this._parentElement,e.isVisible)}}class I extends f{get _computerHealthBarElement(){return this._getElement("computer-health")}get _computerMostCommonMoveElement(){return this._getElement("computer-most-common-move")}get _computerScoreElement(){return this._getElement("computer-score")}get _computerTaraCountElement(){return this._getElement("computer-tara")}get _playerHealthBarElement(){return this._getElement("player-health")}get _playerMostCommonMoveElement(){return this._getElement("player-most-common-move")}get _playerScoreElement(){return this._getElement("player-score")}get _playerTaraCountElement(){return this._getElement("player-tara")}_generateMarkup(){return""}render(){this._parentElement=this._getElement("game-stats")}toggleGameStatsVisibility(e){this._parentElement=this._getElement("game-stats"),this._toggleVisibility(this._parentElement,e)}updateHealthBar(e,t){this._getHealthBar(e).style.width=`${t}%`}_getHealthBar(e){return"player"===e?this._playerHealthBarElement:this._computerHealthBarElement}updateMostCommonMoves(e,t){this._playerMostCommonMoveElement.textContent=e??"N/A",this._computerMostCommonMoveElement.textContent=t??"N/A"}updateScores(e,t){this._playerScoreElement.textContent=e.toString().padStart(2,"0"),this._computerScoreElement.textContent=t.toString().padStart(2,"0")}updateTaraCounts(e,t){this._playerTaraCountElement.textContent=e.toString(),this._computerTaraCountElement.textContent=t.toString()}}class x extends f{_messageElement=null;render(e){this._parentElement=this._getElement("status-container"),super.render(e),this._messageElement=this._parentElement.querySelector("#status")}_generateMarkup(){return`<p id="status">${this._data.message}</p>`}setMessage(e){if(this._data={message:e},this._messageElement)this._messageElement.textContent=e;else{let t=document.getElementById("status");t&&(t.textContent=e)}}}document.addEventListener("DOMContentLoaded",()=>{new E(new V,{announcementView:new R,controlsView:new N,gameView:new T,menuView:new P,moveRevealView:new A,progressView:new H,statsView:new I,statusView:new x}).initialize()});
//# sourceMappingURL=public.5015489d.js.map
