{"mappings":"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","sources":["<anon>","src/index.ts","src/model/model.ts","../src/model/model.ts","src/utils/dataUtils.ts","../src/utils/dataUtils.ts","src/storage/localStorageGameStorage.ts","../src/storage/localStorageGameStorage.ts","src/controller/controller.ts","../src/controller/controller.ts","src/views/announcement/AnnouncementView.ts","../../src/views/announcement/AnnouncementView.ts","src/views/View.ts","../src/views/View.ts","src/views/controls/ControlsView.ts","../../src/views/controls/ControlsView.ts","src/views/game/GameView.ts","../../src/views/game/GameView.ts","src/views/menu/MenuView.ts","../../src/views/menu/MenuView.ts","src/views/moveReveal/MoveRevealView.ts","../../src/views/moveReveal/MoveRevealView.ts","src/views/progress/ProgressView.ts","../../src/views/progress/ProgressView.ts","src/views/stats/StatsView.ts","../../src/views/stats/StatsView.ts","src/views/status/StatusView.ts","../../src/views/status/StatusView.ts"],"sourcesContent":["// =============================================================================\n// ðŸ§± CONFIGURATION FILE: GAME CONSTANTS\n//\n// This module defines all core game data (moves, health, etc.).\n// All move-related constants (lists, maps, types) are generated dynamically\n// from the MOVES_DATABASE to ensure data consistency.\n// =============================================================================\n// -----------------------------------------------------------------------------\n// SECTION 1: SINGLE SOURCE OF TRUTH (MOVES_DATABASE)\n//\n// This is the only place where a move's definition should be edited.\n// 'as const' ensures TypeScript treats values strictly (e.g., \"rock\" vs. string).\n// -----------------------------------------------------------------------------\nconst $71f329d8a7c8539f$var$MOVES_DATABASE = {\n    ROCK: {\n        id: \"rock\",\n        beats: [\n            \"scissors\"\n        ],\n        isStandard: true,\n        text: \"Rock\",\n        icon: \"\\uD83E\\uDEA8\"\n    },\n    PAPER: {\n        id: \"paper\",\n        beats: [\n            \"rock\"\n        ],\n        isStandard: true,\n        text: \"Paper\",\n        icon: \"\\uD83D\\uDCC4\"\n    },\n    SCISSORS: {\n        id: \"scissors\",\n        beats: [\n            \"paper\"\n        ],\n        isStandard: true,\n        text: \"Scissors\",\n        icon: \"\\u2702\\uFE0F\"\n    },\n    TARA: {\n        id: \"tara\",\n        beats: [\n            \"rock\",\n            \"paper\",\n            \"scissors\"\n        ],\n        isStandard: false,\n        text: \"Tara\",\n        icon: \"\\u2B50\"\n    }\n};\n// -----------------------------------------------------------------------------\n// SECTION 3: DYNAMIC CONSTANTS (Runtime Data Structures)\n//\n// Generated at runtime by mapping over the MOVES_DATABASE.\n// -----------------------------------------------------------------------------\n// Helper for iteration\nconst $71f329d8a7c8539f$var$DB_VALUES = Object.values($71f329d8a7c8539f$var$MOVES_DATABASE);\nconst $71f329d8a7c8539f$export$67f072146e5978c8 = Object.fromEntries(Object.entries($71f329d8a7c8539f$var$MOVES_DATABASE).map(([key, val])=>[\n        key,\n        val.id\n    ]));\nconst $71f329d8a7c8539f$export$97019d86eac04150 = $71f329d8a7c8539f$var$DB_VALUES.map((entry)=>({\n        name: entry.id,\n        beats: entry.beats\n    }));\nconst $71f329d8a7c8539f$export$31531e938145c246 = $71f329d8a7c8539f$var$DB_VALUES.map((entry)=>entry.id);\nconst $71f329d8a7c8539f$export$f1cdc934597ad339 = new Map($71f329d8a7c8539f$export$97019d86eac04150.map((m)=>[\n        m.name,\n        m\n    ]));\nconst $71f329d8a7c8539f$export$e004b108e63e350d = $71f329d8a7c8539f$export$97019d86eac04150.filter((_, i)=>$71f329d8a7c8539f$var$DB_VALUES[i].isStandard);\nconst $71f329d8a7c8539f$export$11a493a8727aac2a = $71f329d8a7c8539f$export$e004b108e63e350d.map((data)=>data.name);\nconst $71f329d8a7c8539f$export$6f13edb1b9fe199d = new Map($71f329d8a7c8539f$export$e004b108e63e350d.map((m)=>[\n        m.name,\n        m\n    ]));\nconst $71f329d8a7c8539f$export$e9c8ae7fd9d592e6 = $71f329d8a7c8539f$var$DB_VALUES.map((entry)=>({\n        id: entry.id,\n        text: entry.text,\n        icon: entry.icon\n    }));\nconst $71f329d8a7c8539f$export$d84a9a46fef476ea = Object.fromEntries($71f329d8a7c8539f$var$DB_VALUES.map((entry)=>[\n        entry.id,\n        entry.text\n    ]));\nconst $71f329d8a7c8539f$export$10aaa7122e2cf6d6 = {\n    PLAYER: \"player\",\n    COMPUTER: \"computer\"\n};\nconst $71f329d8a7c8539f$export$981020f3c64bb064 = [\n    0,\n    50,\n    100,\n    null\n];\nconst $71f329d8a7c8539f$export$739b0bbd051f0af9 = 1;\nconst $71f329d8a7c8539f$export$433f561606f01359 = 100;\nconst $71f329d8a7c8539f$export$a2f266d65df4040e = 50;\nconst $71f329d8a7c8539f$export$db626523f766475b = 1;\nconst $71f329d8a7c8539f$export$2de13e891a662beb = {\n    matchRoundNumber: $71f329d8a7c8539f$export$739b0bbd051f0af9,\n    playerHealth: $71f329d8a7c8539f$export$433f561606f01359,\n    computerHealth: $71f329d8a7c8539f$export$433f561606f01359\n};\nconst $71f329d8a7c8539f$export$3528b598622357c7 = {\n    player: \"playerHealth\",\n    computer: \"computerHealth\"\n};\n\n\n\nconst $dc0137b9424d8dd1$var$KEY_SUFFIX_SCORE = \"Score\";\nconst $dc0137b9424d8dd1$var$KEY_SUFFIX_TARA_COUNT = \"TaraCount\";\nconst $dc0137b9424d8dd1$var$KEY_SUFFIX_MOST_COMMON_MOVE = \"MostCommonMove\";\nconst $dc0137b9424d8dd1$var$KEY_SUFFIX_MOVE_COUNTS = \"MoveCounts\";\nconst $dc0137b9424d8dd1$var$KEY_SUFFIX_HISTORY = \"History\";\nconst $dc0137b9424d8dd1$var$KEY_ROUND_NUMBER = \"roundNumber\";\nconst $dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER = \"globalMatchNumber\";\nconst $dc0137b9424d8dd1$var$KEY_CURRENT_MATCH = \"currentMatch\";\nconst $dc0137b9424d8dd1$var$DEFAULT_NUMERIC_VALUE = 0;\nconst $dc0137b9424d8dd1$var$DEFAULT_MOVE_COUNTS = {\n    [(0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK]: 0,\n    [(0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER]: 0,\n    [(0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS]: 0\n};\nclass $dc0137b9424d8dd1$export$77bd854ea05fa7f7 {\n    formatKey(participant, suffix) {\n        return `${participant}${suffix}`;\n    }\n    safelySetItem(key, value) {\n        try {\n            localStorage.setItem(key, value);\n        } catch (e) {\n            console.warn(`LocalStorage Error: Failed to save \"${key}\".`, e);\n        }\n    }\n    // ===== Getters =====\n    getScore(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_SCORE);\n        return parseInt(localStorage.getItem(key) || $dc0137b9424d8dd1$var$DEFAULT_NUMERIC_VALUE.toString(), 10);\n    }\n    getTaraCount(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_TARA_COUNT);\n        return parseInt(localStorage.getItem(key) || $dc0137b9424d8dd1$var$DEFAULT_NUMERIC_VALUE.toString(), 10);\n    }\n    getMostCommonMove(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOST_COMMON_MOVE);\n        const move = localStorage.getItem(key);\n        return move && (0, $71f329d8a7c8539f$export$11a493a8727aac2a).includes(move) ? move : null;\n    }\n    getMoveCounts(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOVE_COUNTS);\n        try {\n            const raw = localStorage.getItem(key);\n            return raw ? JSON.parse(raw) : $dc0137b9424d8dd1$var$DEFAULT_MOVE_COUNTS;\n        } catch (e) {\n            console.warn(`LocalStorage Error: Failed to parse \"${key}\".`, e);\n            return $dc0137b9424d8dd1$var$DEFAULT_MOVE_COUNTS;\n        }\n    }\n    getGlobalMatchNumber() {\n        const stored = localStorage.getItem($dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER);\n        return stored !== null ? parseInt(stored, 10) : null;\n    }\n    getMatch() {\n        try {\n            const raw = localStorage.getItem($dc0137b9424d8dd1$var$KEY_CURRENT_MATCH);\n            return raw ? JSON.parse(raw) : null;\n        } catch (e) {\n            console.warn(`LocalStorage Error: Failed to parse currentMatch.`, e);\n            return null;\n        }\n    }\n    getOldGlobalRoundNumber() {\n        const roundString = localStorage.getItem($dc0137b9424d8dd1$var$KEY_ROUND_NUMBER);\n        // If the item doesn't exist in localStorage, getItem returns null.\n        if (roundString === null) return null;\n        // Attempt to parse the string to an integer.\n        const parsedRound = parseInt(roundString, 10);\n        // Check if parsing resulted in NaN (Not a Number), meaning the stored value was invalid.\n        if (isNaN(parsedRound)) {\n            console.warn(`Legacy 'roundNumber' in localStorage (${roundString}) is not a valid number. Skipping migration.`);\n            return null; // Treat invalid data as if it doesn't exist for migration purposes\n        }\n        return parsedRound;\n    }\n    // ===== Setters =====\n    setScore(participant, score) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_SCORE);\n        this.safelySetItem(key, score.toString());\n    }\n    setTaraCount(participant, count) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_TARA_COUNT);\n        this.safelySetItem(key, count.toString());\n    }\n    setMostCommonMove(participant, move) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOST_COMMON_MOVE);\n        if (move) this.safelySetItem(key, move);\n        else localStorage.removeItem(key);\n    }\n    setMoveCounts(participant, moveCounts) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOVE_COUNTS);\n        this.safelySetItem(key, JSON.stringify(moveCounts));\n    }\n    setGlobalMatchNumber(matchNumber) {\n        if (matchNumber) this.safelySetItem($dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER, matchNumber.toString());\n        else localStorage.removeItem($dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER);\n    }\n    setMatch(match) {\n        if (match) this.safelySetItem($dc0137b9424d8dd1$var$KEY_CURRENT_MATCH, JSON.stringify(match));\n        else localStorage.removeItem($dc0137b9424d8dd1$var$KEY_CURRENT_MATCH);\n    }\n    // ===== Removers =====\n    removeScore(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_SCORE);\n        localStorage.removeItem(key);\n    }\n    removeTaraCount(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_TARA_COUNT);\n        localStorage.removeItem(key);\n    }\n    removeMostCommonMove(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOST_COMMON_MOVE);\n        localStorage.removeItem(key);\n    }\n    removeMoveCounts(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_MOVE_COUNTS);\n        localStorage.removeItem(key);\n    }\n    removeHistory(participant) {\n        const key = this.formatKey(participant, $dc0137b9424d8dd1$var$KEY_SUFFIX_HISTORY);\n        localStorage.removeItem(key);\n    }\n    removeGlobalMatchNumber() {\n        localStorage.removeItem($dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER);\n    }\n    removeOldGlobalRoundNumber() {\n        localStorage.removeItem($dc0137b9424d8dd1$var$KEY_ROUND_NUMBER);\n    }\n}\n\n\nclass $98c16915bb808846$export$a1edc412be3e1841 {\n    state = {\n        scores: {\n            player: 0,\n            computer: 0\n        },\n        moves: {\n            player: null,\n            computer: null\n        },\n        taras: {\n            player: 0,\n            computer: 0\n        },\n        mostCommonMove: {\n            player: null,\n            computer: null\n        },\n        moveCounts: {\n            player: {\n                rock: 0,\n                paper: 0,\n                scissors: 0\n            },\n            computer: {\n                rock: 0,\n                paper: 0,\n                scissors: 0\n            }\n        },\n        globalMatchNumber: null,\n        currentMatch: null\n    };\n    gameStorage;\n    constructor(gameStorage = new (0, $dc0137b9424d8dd1$export$77bd854ea05fa7f7)()){\n        this.gameStorage = gameStorage;\n        this.state.scores.player = this.gameStorage.getScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.state.scores.computer = this.gameStorage.getScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this.state.taras.player = this.gameStorage.getTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.state.taras.computer = this.gameStorage.getTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this.state.mostCommonMove.player = this.gameStorage.getMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.state.mostCommonMove.computer = this.gameStorage.getMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this.state.moveCounts.player = this.gameStorage.getMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.state.moveCounts.computer = this.gameStorage.getMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this._loadOrMigrateMatchState();\n    }\n    // ===== General Methods =====\n    doesMoveBeat(a, b) {\n        return (0, $71f329d8a7c8539f$export$f1cdc934597ad339).get(a)?.beats.includes(b) ?? false;\n    }\n    handleRoundWin(winner, winningMove) {\n        if (this.isStandardMove(winningMove)) {\n            const currentTara = this.getTaraCount(winner);\n            if (currentTara < 3) this.setTaraCount(winner, currentTara + 1);\n        }\n    }\n    evaluateRound() {\n        const playerMove = this.getPlayerMove();\n        const computerMove = this.getComputerMove();\n        if (playerMove === null || computerMove === null) return \"Invalid round\";\n        this.handleTaraMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, playerMove);\n        this.handleTaraMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, computerMove);\n        if (playerMove === computerMove) return \"It's a tie!\";\n        if (this.doesMoveBeat(playerMove, computerMove)) {\n            this.handleRoundWin((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, playerMove);\n            this.decrementHealth((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n            return \"You win the round!\";\n        } else {\n            this.handleRoundWin((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, computerMove);\n            this.decrementHealth((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n            return \"Computer wins the round!\";\n        }\n    }\n    isMatchActive() {\n        return this.gameStorage.getMatch() !== null;\n    }\n    // ===== Score Methods =====\n    setScore(key, value) {\n        this.state.scores[key] = value;\n        this.gameStorage.setScore(key, value);\n    }\n    getScore(key) {\n        return this.state.scores[key];\n    }\n    resetScore(key) {\n        this.state.scores[key] = 0;\n        this.gameStorage.removeScore(key);\n    }\n    setPlayerScore(score) {\n        this.setScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, score);\n    }\n    setComputerScore(score) {\n        this.setScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, score);\n    }\n    getPlayerScore() {\n        return this.getScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n    }\n    getComputerScore() {\n        return this.getScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    resetScores() {\n        this.resetScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.resetScore((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    // ===== Move Methods =====\n    isStandardMove(value) {\n        return typeof value === \"string\" && value !== (0, $71f329d8a7c8539f$export$67f072146e5978c8).TARA;\n    }\n    setMove(key, move) {\n        this.state.moves[key] = move;\n    }\n    getMove(key) {\n        return this.state.moves[key];\n    }\n    determineMostCommonMove(moveCounts) {\n        let mostCommonMove = null;\n        let highestCount = 0;\n        let hasMoveFrequencyTie = false;\n        for (const [move, count] of Object.entries(moveCounts)){\n            if (count > highestCount) {\n                highestCount = count;\n                mostCommonMove = move;\n                hasMoveFrequencyTie = false;\n            } else if (count === highestCount && count !== 0) hasMoveFrequencyTie = true;\n        }\n        return hasMoveFrequencyTie ? null : mostCommonMove;\n    }\n    resetMostCommonMove(key) {\n        this.state.mostCommonMove[key] = null;\n        this.gameStorage.removeMostCommonMove(key);\n    }\n    setMostCommonMove(key, moveCounts) {\n        const mostCommonMove = this.determineMostCommonMove(moveCounts);\n        this.state.mostCommonMove[key] = mostCommonMove;\n        this.gameStorage.setMostCommonMove(key, mostCommonMove);\n    }\n    getMostCommonMove(key) {\n        return this.state.mostCommonMove[key];\n    }\n    getAvailableMoves(hasTara) {\n        if (hasTara) return 0, $71f329d8a7c8539f$export$31531e938145c246;\n        else return 0, $71f329d8a7c8539f$export$11a493a8727aac2a;\n    }\n    getBaseWeights() {\n        return {\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK]: 1,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER]: 1,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS]: 1,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).TARA]: 0\n        };\n    }\n    getTaraWeight(moves) {\n        if (!moves.includes((0, $71f329d8a7c8539f$export$67f072146e5978c8).TARA)) return null;\n        const { player: player, computer: computer } = this.state.scores;\n        const scoreDiff = player - computer;\n        if (scoreDiff > 0) return Math.min(3 + scoreDiff, 10);\n        if (scoreDiff < 0) return 1;\n        return 2;\n    }\n    getStandardMoveWeights() {\n        const weights = {\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK]: 1,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER]: 1,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS]: 1\n        };\n        const mostCommon = this.state.mostCommonMove.player;\n        if (!mostCommon) return weights;\n        const counterMap = {\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK]: (0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER]: (0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS]: (0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK\n        };\n        const counter = counterMap[mostCommon];\n        return {\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK]: counter === (0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK ? 5 : 2,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER]: counter === (0, $71f329d8a7c8539f$export$67f072146e5978c8).PAPER ? 5 : 2,\n            [(0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS]: counter === (0, $71f329d8a7c8539f$export$67f072146e5978c8).SCISSORS ? 5 : 2\n        };\n    }\n    chooseWeightedRandomMove(moves, weights) {\n        const weightedPool = moves.flatMap((move)=>Array(weights[move]).fill(move));\n        const randomIndex = Math.floor(Math.random() * weightedPool.length);\n        return weightedPool[randomIndex];\n    }\n    getComputerMoveWeights(moves) {\n        const baseWeights = this.getBaseWeights();\n        const taraWeight = this.getTaraWeight(moves);\n        const standardWeights = this.getStandardMoveWeights();\n        return {\n            ...baseWeights,\n            ...standardWeights,\n            ...taraWeight !== null ? {\n                [(0, $71f329d8a7c8539f$export$67f072146e5978c8).TARA]: taraWeight\n            } : {}\n        };\n    }\n    getWeightedComputerMove() {\n        const hasTara = this.getComputerTaraCount() > 0;\n        const availableMoves = this.getAvailableMoves(hasTara);\n        const weights = this.getComputerMoveWeights(availableMoves);\n        return this.chooseWeightedRandomMove(availableMoves, weights);\n    }\n    setPlayerMove(move) {\n        this.setMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, move);\n    }\n    getPlayerMove() {\n        return this.getMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n    }\n    setComputerMove(move) {\n        this.setMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, move);\n    }\n    getComputerMove() {\n        return this.getMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    resetMoves() {\n        this.setPlayerMove(null);\n        this.setComputerMove(null);\n    }\n    chooseComputerMove() {\n        const move = this.getWeightedComputerMove();\n        this.registerComputerMove(move);\n    }\n    registerPlayerMove(move) {\n        this.setPlayerMove(move);\n        if (this.isStandardMove(move)) {\n            this.setMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, move);\n            this.setPlayerMostCommonMove();\n        }\n    }\n    registerComputerMove(move) {\n        this.setComputerMove(move);\n        if (this.isStandardMove(move)) {\n            this.setMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, move);\n            this.setComputerMostCommonMove();\n        }\n    }\n    setPlayerMostCommonMove() {\n        const moveCounts = this.getMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.setMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, moveCounts);\n    }\n    setComputerMostCommonMove() {\n        const moveCounts = this.getMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this.setMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, moveCounts);\n    }\n    resetMostCommonMoves() {\n        this.resetMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.resetMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    getPlayerMostCommonMove() {\n        return this.getMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n    }\n    getComputerMostCommonMove() {\n        return this.getMostCommonMove((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    setMoveCounts(key, move) {\n        this.state.moveCounts[key][move] = (this.state.moveCounts[key][move] || 0) + 1;\n        this.gameStorage.setMoveCounts(key, this.state.moveCounts[key]);\n    }\n    resetMoveCounts(key) {\n        this.state.moveCounts[key] = {\n            rock: 0,\n            paper: 0,\n            scissors: 0\n        };\n        this.gameStorage.removeMoveCounts(key);\n    }\n    getMoveCounts(key) {\n        return this.state.moveCounts[key];\n    }\n    resetBothMoveCounts() {\n        this.resetMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.resetMoveCounts((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    showMostCommonMove() {\n        return this.getPlayerMostCommonMove() !== null || this.getComputerMostCommonMove() !== null;\n    }\n    resetHistory(key) {\n        this.gameStorage.removeHistory(key);\n    }\n    resetHistories() {\n        this.resetHistory((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.resetHistory((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    // ===== Round Methods =====\n    getRoundNumber() {\n        return this.state.currentMatch?.matchRoundNumber ?? 1;\n    }\n    setRoundNumber(value) {\n        if (!this.state.currentMatch) return;\n        this.state.currentMatch.matchRoundNumber = value;\n        this.gameStorage.setMatch(this.state.currentMatch);\n    }\n    increaseRoundNumber() {\n        const current = this.getRoundNumber();\n        this.setRoundNumber(current + 1);\n    }\n    // ===== Tara Methods =====\n    decrementTaraCount(key) {\n        const current = this.getTaraCount(key);\n        if (current > 1) this.setTaraCount(key, current - 1);\n        else if (current === 1) this.resetTaraCount(key);\n    }\n    handleTaraMove(key, move) {\n        if (move === (0, $71f329d8a7c8539f$export$67f072146e5978c8).TARA) {\n            const currentTara = this.getTaraCount(key);\n            if (currentTara > 0) this.decrementTaraCount(key);\n            else this.setMove(key, (0, $71f329d8a7c8539f$export$67f072146e5978c8).ROCK);\n        }\n    }\n    setTaraCount(key, value) {\n        this.state.taras[key] = value;\n        this.gameStorage.setTaraCount(key, value);\n    }\n    getTaraCount(key) {\n        return this.state.taras[key];\n    }\n    resetTaraCount(key) {\n        this.state.taras[key] = 0;\n        this.gameStorage.removeTaraCount(key);\n    }\n    setPlayerTaraCount(count) {\n        this.setTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, count);\n    }\n    setComputerTaraCount(count) {\n        this.setTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, count);\n    }\n    resetTaras() {\n        this.resetTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        this.resetTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    getPlayerTaraCount() {\n        return this.getTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n    }\n    getComputerTaraCount() {\n        return this.getTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    taraIsEnabled() {\n        return this.getTaraCount((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER) > 0;\n    }\n    // ===== Match Methods =====\n    handleMatchWin() {\n        const winner = this.getMatchWinner();\n        this.setScore(winner, this.getScore(winner) + 1);\n        return winner;\n    }\n    setMatch(match) {\n        this.state.currentMatch = match;\n        this.gameStorage.setMatch(match);\n    }\n    setMatchNumber(matchNumber) {\n        this.state.globalMatchNumber = matchNumber;\n        this.gameStorage.setGlobalMatchNumber(matchNumber);\n    }\n    /**\n     * Sets default match data if no match is currently active.\n     *\n     * Used as a fallback when no match data is loaded (e.g., from `_loadOrMigrateMatchState()`).\n     * Does not overwrite existing match state.\n     */ setDefaultMatchData() {\n        const isMatchActive = this.isMatchActive();\n        if (!isMatchActive) this.setMatch({\n            ...(0, $71f329d8a7c8539f$export$2de13e891a662beb)\n        });\n    }\n    resetMatchData() {\n        this.state.currentMatch = null;\n        this.gameStorage.setMatch(null);\n        this.setMatchNumber(null);\n    }\n    getMatchNumber() {\n        return this.state.globalMatchNumber ?? 1;\n    }\n    isMatchOver() {\n        return this.isDefeated((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER) || this.isDefeated((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n    }\n    getMatchWinner() {\n        if (this.isDefeated((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER)) return (0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER;\n        else return (0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER;\n    }\n    incrementMatchNumber() {\n        const currentMatchNumber = this.getMatchNumber();\n        this.setMatchNumber(currentMatchNumber + 1);\n    }\n    /**\n     * Initializes the game state based on available storage.\n     *\n     * This method is called during Model construction. It checks for:\n     * - A valid saved match (loads it and skips migration),\n     * - An old-format global round number (migrates it into a new match),\n     * - Or no valid data (leaves currentMatch unset).\n     *\n     * It also ensures the global match number is set appropriately.\n     */ _loadOrMigrateMatchState() {\n        if (this.isMatchActive()) {\n            this._loadExistingMatchState();\n            return;\n        }\n        const oldGlobalRoundNumber = this.gameStorage.getOldGlobalRoundNumber();\n        if (oldGlobalRoundNumber !== null && oldGlobalRoundNumber > 0) this._migrateOldData(oldGlobalRoundNumber);\n    // Otherwise: no migration, and no existing match â€” do nothing.\n    }\n    /**\n     * Loads state for an existing match stored in the new format.\n     */ _loadExistingMatchState() {\n        this.state.globalMatchNumber = this.gameStorage.getGlobalMatchNumber();\n        this.state.currentMatch = this.gameStorage.getMatch();\n    }\n    /**\n     * Migrates match state from an older game version to the current format.\n     *\n     * @param oldRoundNumber - The round number from the old game format.\n     */ _migrateOldData(oldRoundNumber) {\n        const migratedMatch = {\n            matchRoundNumber: oldRoundNumber,\n            playerHealth: (0, $71f329d8a7c8539f$export$433f561606f01359),\n            computerHealth: (0, $71f329d8a7c8539f$export$433f561606f01359),\n            initialHealth: (0, $71f329d8a7c8539f$export$433f561606f01359),\n            damagePerLoss: (0, $71f329d8a7c8539f$export$a2f266d65df4040e)\n        };\n        this.setMatch(migratedMatch);\n        this.gameStorage.removeOldGlobalRoundNumber();\n        this.state.globalMatchNumber = 1;\n        this.gameStorage.setGlobalMatchNumber(this.state.globalMatchNumber);\n    }\n    // ===== Health Methods =====\n    getHealthKey(participant) {\n        return (0, $71f329d8a7c8539f$export$3528b598622357c7)[participant];\n    }\n    getHealth(participant) {\n        const match = this.state.currentMatch;\n        if (!match) return null;\n        const key = this.getHealthKey(participant);\n        const value = match[key];\n        return (0, $71f329d8a7c8539f$export$981020f3c64bb064).includes(value) ? value : null;\n    }\n    decrementHealth(participant) {\n        const match = this.state.currentMatch;\n        if (!match) return false;\n        const key = this.getHealthKey(participant);\n        const currentHealth = match[key];\n        if (currentHealth <= 0) return false;\n        match[key] = Math.max(0, currentHealth - (0, $71f329d8a7c8539f$export$a2f266d65df4040e));\n        return true;\n    }\n    isDefeated(participant) {\n        const health = this.getHealth(participant);\n        return health !== null && health <= 0;\n    }\n}\n\n\n\nclass $44521653474fa731$export$bd0bf19f25da8474 {\n    model;\n    announcementView;\n    controlsView;\n    gameView;\n    menuView;\n    moveRevealView;\n    progressView;\n    statsView;\n    statusView;\n    constructor(model, views){\n        this.model = model;\n        this.announcementView = views.announcementView;\n        this.controlsView = views.controlsView;\n        this.gameView = views.gameView;\n        this.menuView = views.menuView;\n        this.moveRevealView = views.moveRevealView;\n        this.progressView = views.progressView;\n        this.statsView = views.statsView;\n        this.statusView = views.statusView;\n    }\n    updateControlsView() {\n        this.controlsView.render({\n            playerMove: this.model.getPlayerMove(),\n            isMatchOver: this.model.isMatchOver(),\n            taraIsEnabled: this.model.taraIsEnabled(),\n            moves: (0, $71f329d8a7c8539f$export$e9c8ae7fd9d592e6)\n        });\n    }\n    updateProgressView(options) {\n        this.progressView.update({\n            matchNumber: this.model.getMatchNumber(),\n            roundNumber: this.model.getRoundNumber(),\n            isVisible: options.isVisible\n        });\n    }\n    updateScoreView() {\n        this.statsView.updateScores(this.model.getPlayerScore(), this.model.getComputerScore());\n    }\n    updateTaraView() {\n        this.statsView.updateTaraCounts(this.model.getPlayerTaraCount(), this.model.getComputerTaraCount());\n    }\n    updateMostCommonMoveView() {\n        this.statsView.updateMostCommonMoves(this.model.getPlayerMostCommonMove(), this.model.getComputerMostCommonMove());\n    }\n    updateHealthView() {\n        const playerHealth = this.model.getHealth((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER);\n        const computerHealth = this.model.getHealth((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER);\n        this.statsView.updateHealthBar((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER, playerHealth);\n        this.statsView.updateHealthBar((0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).COMPUTER, computerHealth);\n    }\n    async startGame() {\n        this.model.setDefaultMatchData();\n        this.gameView.toggleVisibility(true);\n        this.updateProgressView({\n            isVisible: true\n        });\n        this.menuView.toggleMenuVisibility(false);\n        this.statsView.toggleGameStatsVisibility(true);\n        this.statusView.setMessage(\"Get ready...\");\n        this.updateControlsView();\n        this.updateHealthView();\n        this.controlsView.toggleVisibility(true);\n        await this.controlsView.flipAll(true);\n        this.statusView.setMessage(\"Choose your attack!\");\n    }\n    endRound() {\n        const playerMove = this.model.getPlayerMove();\n        const computerMove = this.model.getComputerMove();\n        const result = this.model.evaluateRound();\n        const matchActuallyEnded = this.model.isMatchOver();\n        this.updateHealthView();\n        let resultMessage = result.toUpperCase();\n        if (matchActuallyEnded) {\n            const winner = this.model.handleMatchWin();\n            resultMessage = `${winner.toUpperCase()} WON THE MATCH!`;\n            this.model.incrementMatchNumber();\n            this.model.setMatch(null);\n        } else this.model.increaseRoundNumber();\n        this.statusView.setMessage(`You played ${(0, $71f329d8a7c8539f$export$d84a9a46fef476ea)[playerMove]}. Computer played ${(0, $71f329d8a7c8539f$export$d84a9a46fef476ea)[computerMove]}.`);\n        this.announcementView.setMessage(resultMessage);\n        this.controlsView.render({\n            playerMove: this.model.getPlayerMove(),\n            isMatchOver: matchActuallyEnded,\n            taraIsEnabled: this.model.taraIsEnabled(),\n            moves: (0, $71f329d8a7c8539f$export$e9c8ae7fd9d592e6)\n        });\n        this.updateScoreView();\n        this.updateTaraView();\n        this.updateMostCommonMoveView();\n    }\n    async handleNextRound() {\n        this.model.resetMoves();\n        this.model.setDefaultMatchData();\n        this.updateHealthView();\n        this.updateProgressView({\n            isVisible: true\n        });\n        this.announcementView.setMessage(\"\");\n        this.moveRevealView.toggleVisibility(false);\n        this.updateControlsView();\n        this.statusView.setMessage(\"Prepare your next move...\");\n        await this.controlsView.flipAll(true);\n        this.statusView.setMessage(\"Choose your attack!\");\n    }\n    async resetGameState() {\n        this.model.resetScores();\n        this.model.resetMoves();\n        this.model.resetTaras();\n        this.model.resetHistories();\n        this.model.resetBothMoveCounts();\n        this.model.resetMostCommonMoves();\n        this.model.resetMatchData();\n        const isMatchActive = this.model.isMatchActive();\n        this.updateScoreView();\n        this.updateTaraView();\n        this.updateHealthView();\n        this.updateMostCommonMoveView();\n        this.updateControlsView();\n        this.moveRevealView.toggleVisibility(false);\n        this.controlsView.toggleVisibility(false);\n        this.menuView.updateMenu({\n            isMatchActive: isMatchActive\n        });\n        this.announcementView.setMessage(\"\");\n    }\n    async handlePlayerMove(move) {\n        this.model.registerPlayerMove(move);\n        this.model.chooseComputerMove();\n        this.statusView.setMessage(\"Locking in move...\");\n        await this.controlsView.flipAll(false);\n        this.moveRevealView.render({\n            playerMoveId: this.model.getPlayerMove(),\n            computerMoveId: this.model.getComputerMove()\n        });\n        this.statusView.setMessage(\"Revealing moves...\");\n        this.moveRevealView.toggleVisibility(true);\n        // 1. Wait for the initial flip\n        await this.moveRevealView.flipCards();\n        // 2. Determine if we need to highlight\n        const pMove = this.model.getPlayerMove();\n        const cMove = this.model.getComputerMove();\n        // Note: Ensure doesMoveBeat is public in your Model!\n        if (pMove && cMove && pMove !== cMove) {\n            const playerWins = this.model.doesMoveBeat(pMove, cMove);\n            // 3. This now returns a Promise that waits for the CSS transition\n            await this.moveRevealView.highlightWinner(playerWins ? \"player\" : \"computer\");\n        } else // 4. If it's a tie, add a tiny organic pause so it doesn't feel \"instant\"\n        // This is optional, but helps UX when there is no animation to wait for.\n        await new Promise((resolve)=>requestAnimationFrame(resolve));\n        this.endRound();\n    }\n    async initialize() {\n        const isMatchActive = this.model.isMatchActive();\n        this.menuView.render({\n            isMatchActive: isMatchActive\n        });\n        this.progressView.render({\n            matchNumber: this.model.getMatchNumber(),\n            roundNumber: this.model.getRoundNumber(),\n            isVisible: false\n        });\n        this.announcementView.render({\n            message: \"\"\n        });\n        this.statusView.render({\n            message: \"\"\n        });\n        this.updateControlsView();\n        this.updateScoreView();\n        this.updateTaraView();\n        this.updateMostCommonMoveView();\n        this.menuView.updateMenu({\n            isMatchActive: isMatchActive\n        });\n        this.statsView.toggleGameStatsVisibility(false);\n        this.controlsView.toggleVisibility(false);\n        this.menuView.toggleMenuVisibility(true);\n        this.menuView.bindStartMatch(()=>this.startGame());\n        this.menuView.bindResetGame(()=>this.resetGameState());\n        this.controlsView.bindPlayerMove((move)=>this.handlePlayerMove(move));\n        this.controlsView.bindNextRound(()=>this.handleNextRound());\n    }\n}\n\n\nclass $12d839d74afa7795$export$2e2bcd8739ae039 {\n    _data;\n    _parentElement;\n    /**\n     * Standard render method used by all views.\n     *\n     * @param data The state/data needed for the UI render.\n     */ render(data) {\n        if (!data) return;\n        this._data = data;\n        const markup = this._generateMarkup();\n        this._clear();\n        this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n    }\n    /**\n     * Patches the DOM by comparing new markup to current nodes.\n     *\n     * @note Requires `_generateMarkup()` to return a single root element.\n     * @note Best for data updates (health/scores); use `render()` if the\n     * number of elements or the DOM structure changes.\n     *\n     * @param data The state/data needed for the UI update.\n     */ update(data) {\n        this._data = data;\n        const newMarkup = this._generateMarkup();\n        const newDOM = document.createRange().createContextualFragment(newMarkup);\n        const newElements = Array.from(newDOM.querySelectorAll(\"*\"));\n        const currentElements = Array.from(this._parentElement.querySelectorAll(\"*\"));\n        newElements.forEach((newElement, i)=>{\n            const currentElement = currentElements[i];\n            // 1. Update changed TEXT\n            if (!newElement.isEqualNode(currentElement) && newElement.firstChild?.nodeValue?.trim() !== \"\" && newElement.firstChild?.nodeValue?.trim() !== undefined) currentElement.textContent = newElement.textContent;\n            // 2. Update changed ATTRIBUTES\n            if (!newElement.isEqualNode(currentElement)) {\n                // Add or update attributes from new to current\n                Array.from(newElement.attributes).forEach((attr)=>currentElement.setAttribute(attr.name, attr.value));\n                // Remove attributes from current that aren't in new\n                Array.from(currentElement.attributes).forEach((attr)=>{\n                    if (!newElement.hasAttribute(attr.name)) currentElement.removeAttribute(attr.name);\n                });\n            }\n        });\n    }\n    _clear() {\n        this._parentElement.innerHTML = \"\";\n    }\n    _getElement(id) {\n        const element = document.getElementById(id);\n        if (!element) throw new Error(`Element #${id} not found.`);\n        return element;\n    }\n    _toggleVisibility(element, show) {\n        element.classList.toggle(\"hidden\", !show);\n        if (show) element.removeAttribute(\"inert\");\n        else element.setAttribute(\"inert\", \"\");\n    }\n    _waitForAnimation(element) {\n        return new Promise((resolve)=>{\n            const duration = parseFloat(getComputedStyle(element).transitionDuration);\n            // If no duration (tests) or already hidden, resolve immediately\n            if (!duration || duration === 0) {\n                resolve();\n                return;\n            }\n            const handler = (e)=>{\n                // Only resolve for the main transform/opacity, not every sub-property\n                if (e.target === element) {\n                    element.removeEventListener(\"transitionend\", handler);\n                    resolve();\n                }\n            };\n            element.addEventListener(\"transitionend\", handler);\n        });\n    }\n}\n\n\nclass $fec01fd9bb0db177$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _messageElement = null;\n    render(data) {\n        this._parentElement = this._getElement(\"announcement-container\");\n        super.render(data);\n        // Cache the element right after rendering\n        this._messageElement = this._parentElement.querySelector(\"#announcement\");\n    }\n    _generateMarkup() {\n        return `<h2 id=\"announcement\">${this._data.message}</h2>`;\n    }\n    setMessage(message) {\n        this._data = {\n            message: message\n        };\n        if (this._messageElement) this._messageElement.textContent = message;\n        else {\n            // Fallback in case setMessage is called before render\n            const el = document.getElementById(\"announcement\");\n            if (el) el.textContent = message;\n        }\n    }\n}\n\n\n\nclass $49b533f33fbcd4f0$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _moveHandler;\n    _nextRoundHandler;\n    // Track visual state to prevent markup-regressions during render\n    _isFaceUp = false;\n    render(data) {\n        this._parentElement = this._getElement(\"game-controls\");\n        super.render(data);\n        this._setupListeners();\n    }\n    /**\n     * Orchestrates the 3D flip for all choice cards.\n     * @param faceUp - True to show icons, False to show \"BACK\"\n     */ async flipAll(faceUp) {\n        this._isFaceUp = faceUp;\n        const cards = this._parentElement.querySelectorAll(\".card-inner\");\n        if (cards.length === 0) return;\n        // Read 'offsetHeight' to force the browser to paint the cards\n        // in their current state (visible but 0deg) BEFORE we add the class.\n        // This ensures the transition actually runs.\n        const _forceReflow = cards[0].offsetHeight;\n        cards.forEach((card)=>{\n            faceUp ? card.classList.add(\"is-flipped\") : card.classList.remove(\"is-flipped\");\n        });\n        // Wait for the transition\n        await this._waitForAnimation(cards[0]);\n    }\n    _generateMarkup() {\n        const { playerMove: playerMove, isMatchOver: isMatchOver, moves: moves, taraIsEnabled: taraIsEnabled } = this._data;\n        if (!playerMove) return `\n      <div id=\"choices\" role=\"group\" aria-label=\"Select your move\">\n        ${moves.map((move)=>{\n            const disabled = move.id === \"tara\" && !taraIsEnabled;\n            // Maintain current flip state during re-renders\n            const flipClass = this._isFaceUp ? \"is-flipped\" : \"\";\n            return `\n            <button id=\"${move.id}\" class=\"card-button\" ${disabled ? \"disabled\" : \"\"}>\n              <div class=\"card-inner ${flipClass}\">\n                <div class=\"card-back player-theme\"></div>\n                <div class=\"card-front\">\n                  <span class=\"icon\" aria-hidden=\"true\">${move.icon}</span>\n                  <span class=\"label\">${move.text}</span>\n                </div>\n              </div>\n            </button>`;\n        }).join(\"\")}\n      </div>`;\n        return `\n    <div id=\"progression-zone\" aria-live=\"polite\">\n      <button id=\"play-again\" class=\"btn-primary\">\n        ${isMatchOver ? \"Start New Match\" : \"Next Round\"}\n      </button>\n    </div>`;\n    }\n    toggleVisibility(show) {\n        if (!this._parentElement) this._parentElement = this._getElement(\"game-controls\");\n        this._toggleVisibility(this._parentElement, show);\n    }\n    bindPlayerMove(handler) {\n        this._moveHandler = handler;\n    }\n    bindNextRound(handler) {\n        this._nextRoundHandler = handler;\n    }\n    _setupListeners() {\n        this._parentElement.onclick = (e)=>{\n            const target = e.target;\n            const moveBtn = target.closest(\".card-button\");\n            const nextBtn = target.closest(\"#play-again\");\n            if (moveBtn && this._moveHandler) this._moveHandler(moveBtn.id);\n            if (nextBtn && this._nextRoundHandler) this._nextRoundHandler();\n        };\n    }\n}\n\n\n\nclass $479a56ea6df29526$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _ensureParentElement() {\n        if (!this._parentElement || !document.body.contains(this._parentElement)) this._parentElement = this._getElement(\"game-container\");\n    }\n    toggleVisibility(show) {\n        this._ensureParentElement();\n        this._toggleVisibility(this._parentElement, show);\n    }\n    // Satisfy the abstract requirement without doing anything\n    _generateMarkup() {\n        return \"\";\n    }\n}\n\n\n\nclass $8e914c20156285d4$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    // Cache the specific buttons\n    _startBtn;\n    _resetBtn;\n    _generateMarkup() {\n        const startText = this._data.isMatchActive ? \"Continue Match\" : \"Start Match\";\n        return `\n      <div class=\"menu-content\">\n        <h1 id=\"game-title\" class=\"title-large\">Rock Paper Scissors Tara</h1>\n        <div class=\"menu-controls\">\n          <button id=\"start\" class=\"btn-primary\">${startText}</button>\n          <button id=\"reset-game-state\" class=\"btn-secondary\">Reset Game State</button>\n        </div>\n      </div>\n    `;\n    }\n    _ensureParentElement() {\n        if (!this._parentElement || !document.body.contains(this._parentElement)) this._parentElement = this._getElement(\"main-menu\");\n    }\n    render(data) {\n        this._ensureParentElement();\n        super.render(data);\n        // Cache the elements immediately after they are injected into the DOM\n        this._startBtn = this._getElement(\"start\");\n        this._resetBtn = this._getElement(\"reset-game-state\");\n    }\n    // ===== Event Bindings (Much more efficient now) =====\n    bindStartMatch(handler) {\n        this._startBtn?.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            handler();\n        });\n    }\n    bindResetGame(handler) {\n        this._resetBtn?.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            handler();\n        });\n    }\n    toggleMenuVisibility(show) {\n        this._ensureParentElement();\n        this._toggleVisibility(this._parentElement, show);\n    }\n    updateMenu(data) {\n        this._data = {\n            ...this._data,\n            ...data\n        };\n        this.update(this._data);\n        // After an update, re-cache in case elements were replaced\n        this._startBtn = this._getElement(\"start\");\n        this._resetBtn = this._getElement(\"reset-game-state\");\n    }\n}\n\n\n\n\nclass $0ad4938d4388d231$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _parentElement = document.getElementById(\"move-reveal\");\n    _generateMarkup() {\n        const { playerMoveId: playerMoveId, computerMoveId: computerMoveId } = this._data;\n        const playerMove = (0, $71f329d8a7c8539f$export$e9c8ae7fd9d592e6).find((move)=>move.id === playerMoveId);\n        const computerMove = (0, $71f329d8a7c8539f$export$e9c8ae7fd9d592e6).find((move)=>move.id === computerMoveId);\n        if (!playerMove || !computerMove) return \"\";\n        const renderCard = (move, theme)=>`\n      <div class=\"card\" data-id=\"${move.id}\">\n        <div class=\"card-inner\">\n          <div class=\"card-back ${theme}\"></div> <div class=\"card-front\">\n            <span class=\"icon\">${move.icon}</span>\n            <span class=\"label\">${move.text}</span>\n          </div>\n        </div>\n      </div>\n    `;\n        return `\n      ${renderCard(playerMove, \"player-theme\")}\n      <span class=\"vs-label\">VS</span>\n      ${renderCard(computerMove, \"computer-theme\")}\n    `;\n    }\n    toggleVisibility(show) {\n        if (!show) this._parentElement.querySelectorAll(\".card\").forEach((el)=>{\n            el.classList.remove(\"winner-highlight\");\n        });\n        this._toggleVisibility(this._parentElement, show);\n    }\n    async flipCards() {\n        const cards = this._parentElement.querySelectorAll(\".card-inner\");\n        if (cards.length === 0) return;\n        // Force Reflow\n        const _forceReflow = cards[0].offsetHeight;\n        cards.forEach((card)=>card.classList.add(\"is-flipped\"));\n        await this._waitForAnimation(cards[0]);\n    }\n    async highlightWinner(participant) {\n        const selector = participant === (0, $71f329d8a7c8539f$export$10aaa7122e2cf6d6).PLAYER ? \".player-theme\" : \".computer-theme\";\n        const winningCard = this._parentElement.querySelector(selector)?.closest(\".card\");\n        if (winningCard) {\n            winningCard.classList.add(\"winner-highlight\");\n            await this._waitForAnimation(winningCard);\n        }\n    }\n}\n\n\n\nclass $c1a744efd25a44ca$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _ensureParentElement() {\n        if (!this._parentElement || !document.body.contains(this._parentElement)) this._parentElement = this._getElement(\"game-progress-container\");\n    }\n    _generateMarkup() {\n        return `\n      <h2 id=\"match\">Match ${this._data.matchNumber}</h1>\n      <h1 id=\"round\">Round ${this._data.roundNumber}</h2>\n    `;\n    }\n    /**\n     * Initial display of the progress section\n     */ render(data) {\n        this._ensureParentElement();\n        super.render(data);\n        this._toggleVisibility(this._parentElement, data.isVisible);\n    }\n    /**\n     * Updates Match and Round numbers and visibility\n     */ update(data) {\n        this._ensureParentElement();\n        super.update(data);\n        this._toggleVisibility(this._parentElement, data.isVisible);\n    }\n}\n\n\n\nclass $b396eb86f0686586$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    get _computerHealthBarElement() {\n        return this._getElement(\"computer-health\");\n    }\n    get _computerMostCommonMoveElement() {\n        return this._getElement(\"computer-most-common-move\");\n    }\n    get _computerScoreElement() {\n        return this._getElement(\"computer-score\");\n    }\n    get _computerTaraCountElement() {\n        return this._getElement(\"computer-tara\");\n    }\n    get _playerHealthBarElement() {\n        return this._getElement(\"player-health\");\n    }\n    get _playerMostCommonMoveElement() {\n        return this._getElement(\"player-most-common-move\");\n    }\n    get _playerScoreElement() {\n        return this._getElement(\"player-score\");\n    }\n    get _playerTaraCountElement() {\n        return this._getElement(\"player-tara\");\n    }\n    // ===== General Methods =====\n    // Satisfy the abstract requirement without doing anything\n    _generateMarkup() {\n        return \"\";\n    }\n    render() {\n        this._parentElement = this._getElement(\"game-stats\");\n    // DO NOT call super.render().\n    // Calling super.render() triggers _clear()\n    }\n    toggleGameStatsVisibility(show) {\n        this._parentElement = this._getElement(\"game-stats\");\n        this._toggleVisibility(this._parentElement, show);\n    }\n    // ===== Health Methods =====\n    updateHealthBar(participant, health) {\n        const bar = this._getHealthBar(participant);\n        // Directly set width percentage\n        bar.style.width = `${health}%`;\n    }\n    _getHealthBar(participant) {\n        return participant === \"player\" ? this._playerHealthBarElement : this._computerHealthBarElement;\n    }\n    // ===== History Methods =====\n    updateMostCommonMoves(player, computer) {\n        this._playerMostCommonMoveElement.textContent = player ?? \"N/A\";\n        this._computerMostCommonMoveElement.textContent = computer ?? \"N/A\";\n    }\n    // ===== Score Methods =====\n    updateScores(player, computer) {\n        this._playerScoreElement.textContent = player.toString().padStart(2, \"0\");\n        this._computerScoreElement.textContent = computer.toString().padStart(2, \"0\");\n    }\n    // ===== Tara Methods =====\n    updateTaraCounts(playerCount, computerCount) {\n        this._playerTaraCountElement.textContent = playerCount.toString();\n        this._computerTaraCountElement.textContent = computerCount.toString();\n    }\n}\n\n\n\nclass $067e764345c4c27f$export$2e2bcd8739ae039 extends (0, $12d839d74afa7795$export$2e2bcd8739ae039) {\n    _messageElement = null;\n    render(data) {\n        this._parentElement = this._getElement(\"status-container\");\n        super.render(data);\n        // Cache the element right after rendering\n        this._messageElement = this._parentElement.querySelector(\"#status\");\n    }\n    _generateMarkup() {\n        return `<p id=\"status\">${this._data.message}</p>`;\n    }\n    setMessage(message) {\n        this._data = {\n            message: message\n        };\n        if (this._messageElement) this._messageElement.textContent = message;\n        else {\n            // Fallback in case setMessage is called before render\n            const el = document.getElementById(\"status\");\n            if (el) el.textContent = message;\n        }\n    }\n}\n\n\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    const model = new (0, $98c16915bb808846$export$a1edc412be3e1841)();\n    const controller = new (0, $44521653474fa731$export$bd0bf19f25da8474)(model, {\n        announcementView: new (0, $fec01fd9bb0db177$export$2e2bcd8739ae039)(),\n        controlsView: new (0, $49b533f33fbcd4f0$export$2e2bcd8739ae039)(),\n        gameView: new (0, $479a56ea6df29526$export$2e2bcd8739ae039)(),\n        menuView: new (0, $8e914c20156285d4$export$2e2bcd8739ae039)(),\n        moveRevealView: new (0, $0ad4938d4388d231$export$2e2bcd8739ae039)(),\n        progressView: new (0, $c1a744efd25a44ca$export$2e2bcd8739ae039)(),\n        statsView: new (0, $b396eb86f0686586$export$2e2bcd8739ae039)(),\n        statusView: new (0, $067e764345c4c27f$export$2e2bcd8739ae039)()\n    });\n    controller.initialize();\n});\n\n\n//# sourceMappingURL=public.5015489d.js.map\n","import { Model } from \"./model/model\";\nimport { Controller } from \"./controller/controller\";\n\nimport AnnouncementView from \"./views/announcement/AnnouncementView\";\nimport ControlsView from \"./views/controls/ControlsView\";\nimport GameView from \"./views/game/GameView\";\nimport MenuView from \"./views/menu/MenuView\";\nimport MoveRevealView from \"./views/moveReveal/MoveRevealView\";\nimport ProgressView from \"./views/progress/ProgressView\";\nimport StatsView from \"./views/stats/StatsView\";\nimport StatusView from \"./views/status/StatusView\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const model = new Model();\n\n  const controller = new Controller(model, {\n    announcementView: new AnnouncementView(),\n    controlsView: new ControlsView(),\n    gameView: new GameView(),\n    menuView: new MenuView(),\n    moveRevealView: new MoveRevealView(),\n    progressView: new ProgressView(),\n    statsView: new StatsView(),\n    statusView: new StatusView(),\n  });\n\n  controller.initialize();\n});\n","import {\n  GameState,\n  Health,\n  Match,\n  Move,\n  MoveCount,\n  Participant,\n  StandardMove,\n} from \"../utils/dataObjectUtils\";\nimport {\n  ALL_MOVE_NAMES,\n  DAMAGE_PER_LOSS,\n  DEFAULT_MATCH,\n  HEALTH_KEYS,\n  INITIAL_HEALTH,\n  MOVES,\n  MOVE_DATA_MAP,\n  PARTICIPANTS,\n  STANDARD_MOVE_NAMES,\n  VALID_HEALTH,\n} from \"../utils/dataUtils\";\nimport { IGameStorage } from \"../storage/gameStorage\";\nimport { LocalStorageGameStorage } from \"../storage/localStorageGameStorage\";\n\nexport class Model {\n  private state: GameState = {\n    scores: {\n      player: 0,\n      computer: 0,\n    },\n    moves: {\n      player: null,\n      computer: null,\n    },\n    taras: {\n      player: 0,\n      computer: 0,\n    },\n    mostCommonMove: {\n      player: null,\n      computer: null,\n    },\n    moveCounts: {\n      player: { rock: 0, paper: 0, scissors: 0 },\n      computer: { rock: 0, paper: 0, scissors: 0 },\n    },\n    globalMatchNumber: null,\n    currentMatch: null,\n  };\n  private gameStorage: IGameStorage;\n\n  constructor(gameStorage: IGameStorage = new LocalStorageGameStorage()) {\n    this.gameStorage = gameStorage;\n\n    this.state.scores.player = this.gameStorage.getScore(PARTICIPANTS.PLAYER);\n    this.state.scores.computer = this.gameStorage.getScore(\n      PARTICIPANTS.COMPUTER\n    );\n    this.state.taras.player = this.gameStorage.getTaraCount(\n      PARTICIPANTS.PLAYER\n    );\n    this.state.taras.computer = this.gameStorage.getTaraCount(\n      PARTICIPANTS.COMPUTER\n    );\n    this.state.mostCommonMove.player = this.gameStorage.getMostCommonMove(\n      PARTICIPANTS.PLAYER\n    );\n    this.state.mostCommonMove.computer = this.gameStorage.getMostCommonMove(\n      PARTICIPANTS.COMPUTER\n    );\n    this.state.moveCounts.player = this.gameStorage.getMoveCounts(\n      PARTICIPANTS.PLAYER\n    );\n    this.state.moveCounts.computer = this.gameStorage.getMoveCounts(\n      PARTICIPANTS.COMPUTER\n    );\n\n    this._loadOrMigrateMatchState();\n  }\n\n  // ===== General Methods =====\n\n  doesMoveBeat(a: Move, b: Move): boolean {\n    return MOVE_DATA_MAP.get(a)?.beats.includes(b) ?? false;\n  }\n\n  private handleRoundWin(winner: Participant, winningMove: Move): void {\n    if (this.isStandardMove(winningMove)) {\n      const currentTara = this.getTaraCount(winner);\n      if (currentTara < 3) {\n        this.setTaraCount(winner, currentTara + 1);\n      }\n    }\n  }\n\n  evaluateRound(): string {\n    const playerMove = this.getPlayerMove();\n    const computerMove = this.getComputerMove();\n\n    if (playerMove === null || computerMove === null) return \"Invalid round\";\n\n    this.handleTaraMove(PARTICIPANTS.PLAYER, playerMove);\n    this.handleTaraMove(PARTICIPANTS.COMPUTER, computerMove);\n\n    if (playerMove === computerMove) {\n      return \"It's a tie!\";\n    }\n\n    if (this.doesMoveBeat(playerMove, computerMove)) {\n      this.handleRoundWin(PARTICIPANTS.PLAYER, playerMove);\n      this.decrementHealth(PARTICIPANTS.COMPUTER);\n      return \"You win the round!\";\n    } else {\n      this.handleRoundWin(PARTICIPANTS.COMPUTER, computerMove);\n      this.decrementHealth(PARTICIPANTS.PLAYER);\n      return \"Computer wins the round!\";\n    }\n  }\n\n  isMatchActive(): boolean {\n    return this.gameStorage.getMatch() !== null;\n  }\n\n  // ===== Score Methods =====\n\n  private setScore(key: Participant, value: number): void {\n    this.state.scores[key] = value;\n    this.gameStorage.setScore(key, value);\n  }\n\n  private getScore(key: Participant): number {\n    return this.state.scores[key];\n  }\n\n  private resetScore(key: Participant): void {\n    this.state.scores[key] = 0;\n    this.gameStorage.removeScore(key);\n  }\n\n  setPlayerScore(score: number) {\n    this.setScore(PARTICIPANTS.PLAYER, score);\n  }\n\n  setComputerScore(score: number) {\n    this.setScore(PARTICIPANTS.COMPUTER, score);\n  }\n\n  getPlayerScore(): number {\n    return this.getScore(PARTICIPANTS.PLAYER);\n  }\n\n  getComputerScore() {\n    return this.getScore(PARTICIPANTS.COMPUTER);\n  }\n\n  resetScores(): void {\n    this.resetScore(PARTICIPANTS.PLAYER);\n    this.resetScore(PARTICIPANTS.COMPUTER);\n  }\n\n  // ===== Move Methods =====\n\n  private isStandardMove(value: unknown): value is StandardMove {\n    return typeof value === \"string\" && value !== MOVES.TARA;\n  }\n\n  private setMove(key: Participant, move: Move | null): void {\n    this.state.moves[key] = move;\n  }\n\n  private getMove(key: Participant): Move | null {\n    return this.state.moves[key];\n  }\n\n  private determineMostCommonMove(moveCounts: MoveCount): StandardMove | null {\n    let mostCommonMove: StandardMove | null = null;\n    let highestCount = 0;\n    let hasMoveFrequencyTie = false;\n\n    for (const [move, count] of Object.entries(moveCounts)) {\n      if (count > highestCount) {\n        highestCount = count;\n        mostCommonMove = move as StandardMove;\n        hasMoveFrequencyTie = false;\n      } else if (count === highestCount && count !== 0) {\n        hasMoveFrequencyTie = true;\n      }\n    }\n\n    return hasMoveFrequencyTie ? null : mostCommonMove;\n  }\n\n  private resetMostCommonMove(key: Participant): void {\n    this.state.mostCommonMove[key] = null;\n    this.gameStorage.removeMostCommonMove(key);\n  }\n\n  private setMostCommonMove(key: Participant, moveCounts: MoveCount): void {\n    const mostCommonMove = this.determineMostCommonMove(moveCounts);\n    this.state.mostCommonMove[key] = mostCommonMove;\n    this.gameStorage.setMostCommonMove(key, mostCommonMove);\n  }\n\n  private getMostCommonMove(key: Participant): StandardMove | null {\n    return this.state.mostCommonMove[key];\n  }\n\n  private getAvailableMoves(hasTara: boolean): Move[] {\n    if (hasTara) {\n      return ALL_MOVE_NAMES;\n    } else {\n      return STANDARD_MOVE_NAMES;\n    }\n  }\n\n  private getBaseWeights(): Record<Move, number> {\n    return {\n      [MOVES.ROCK]: 1,\n      [MOVES.PAPER]: 1,\n      [MOVES.SCISSORS]: 1,\n      [MOVES.TARA]: 0,\n    };\n  }\n\n  private getTaraWeight(moves: Move[]): number | null {\n    if (!moves.includes(MOVES.TARA)) return null;\n\n    const { player, computer } = this.state.scores;\n    const scoreDiff = player - computer;\n\n    if (scoreDiff > 0) return Math.min(3 + scoreDiff, 10);\n    if (scoreDiff < 0) return 1;\n    return 2;\n  }\n\n  private getStandardMoveWeights(): Record<StandardMove, number> {\n    const weights: Record<StandardMove, number> = {\n      [MOVES.ROCK]: 1,\n      [MOVES.PAPER]: 1,\n      [MOVES.SCISSORS]: 1,\n    };\n\n    const mostCommon = this.state.mostCommonMove.player;\n    if (!mostCommon) return weights;\n\n    const counterMap: Record<StandardMove, StandardMove> = {\n      [MOVES.ROCK]: MOVES.PAPER,\n      [MOVES.PAPER]: MOVES.SCISSORS,\n      [MOVES.SCISSORS]: MOVES.ROCK,\n    };\n\n    const counter = counterMap[mostCommon];\n    return {\n      [MOVES.ROCK]: counter === MOVES.ROCK ? 5 : 2,\n      [MOVES.PAPER]: counter === MOVES.PAPER ? 5 : 2,\n      [MOVES.SCISSORS]: counter === MOVES.SCISSORS ? 5 : 2,\n    };\n  }\n\n  private chooseWeightedRandomMove(\n    moves: Move[],\n    weights: Record<Move, number>\n  ): Move {\n    const weightedPool = moves.flatMap((move) =>\n      Array(weights[move]).fill(move)\n    );\n    const randomIndex = Math.floor(Math.random() * weightedPool.length);\n    return weightedPool[randomIndex];\n  }\n\n  private getComputerMoveWeights(moves: Move[]): Record<Move, number> {\n    const baseWeights = this.getBaseWeights();\n    const taraWeight = this.getTaraWeight(moves);\n    const standardWeights = this.getStandardMoveWeights();\n\n    return {\n      ...baseWeights,\n      ...standardWeights,\n      ...(taraWeight !== null ? { [MOVES.TARA]: taraWeight } : {}),\n    };\n  }\n\n  private getWeightedComputerMove(): Move {\n    const hasTara = this.getComputerTaraCount() > 0;\n    const availableMoves = this.getAvailableMoves(hasTara);\n    const weights = this.getComputerMoveWeights(availableMoves);\n\n    return this.chooseWeightedRandomMove(availableMoves, weights);\n  }\n\n  setPlayerMove(move: Move | null) {\n    this.setMove(PARTICIPANTS.PLAYER, move);\n  }\n\n  getPlayerMove(): Move | null {\n    return this.getMove(PARTICIPANTS.PLAYER);\n  }\n\n  setComputerMove(move: Move | null) {\n    this.setMove(PARTICIPANTS.COMPUTER, move);\n  }\n\n  getComputerMove(): Move | null {\n    return this.getMove(PARTICIPANTS.COMPUTER);\n  }\n\n  resetMoves(): void {\n    this.setPlayerMove(null);\n    this.setComputerMove(null);\n  }\n\n  chooseComputerMove(): void {\n    const move = this.getWeightedComputerMove();\n    this.registerComputerMove(move);\n  }\n\n  registerPlayerMove(move: Move) {\n    this.setPlayerMove(move);\n    if (this.isStandardMove(move)) {\n      this.setMoveCounts(PARTICIPANTS.PLAYER, move);\n      this.setPlayerMostCommonMove();\n    }\n  }\n\n  registerComputerMove(move: Move) {\n    this.setComputerMove(move);\n    if (this.isStandardMove(move)) {\n      this.setMoveCounts(PARTICIPANTS.COMPUTER, move);\n      this.setComputerMostCommonMove();\n    }\n  }\n\n  setPlayerMostCommonMove(): void {\n    const moveCounts = this.getMoveCounts(PARTICIPANTS.PLAYER);\n    this.setMostCommonMove(PARTICIPANTS.PLAYER, moveCounts);\n  }\n\n  setComputerMostCommonMove(): void {\n    const moveCounts = this.getMoveCounts(PARTICIPANTS.COMPUTER);\n    this.setMostCommonMove(PARTICIPANTS.COMPUTER, moveCounts);\n  }\n\n  resetMostCommonMoves(): void {\n    this.resetMostCommonMove(PARTICIPANTS.PLAYER);\n    this.resetMostCommonMove(PARTICIPANTS.COMPUTER);\n  }\n\n  getPlayerMostCommonMove(): StandardMove | null {\n    return this.getMostCommonMove(PARTICIPANTS.PLAYER);\n  }\n\n  getComputerMostCommonMove(): StandardMove | null {\n    return this.getMostCommonMove(PARTICIPANTS.COMPUTER);\n  }\n\n  private setMoveCounts(key: Participant, move: StandardMove): void {\n    this.state.moveCounts[key][move] =\n      (this.state.moveCounts[key][move] || 0) + 1;\n    this.gameStorage.setMoveCounts(key, this.state.moveCounts[key]);\n  }\n\n  private resetMoveCounts(key: Participant): void {\n    this.state.moveCounts[key] = { rock: 0, paper: 0, scissors: 0 };\n    this.gameStorage.removeMoveCounts(key);\n  }\n\n  private getMoveCounts(key: Participant): MoveCount {\n    return this.state.moveCounts[key];\n  }\n\n  resetBothMoveCounts(): void {\n    this.resetMoveCounts(PARTICIPANTS.PLAYER);\n    this.resetMoveCounts(PARTICIPANTS.COMPUTER);\n  }\n\n  showMostCommonMove(): boolean {\n    return (\n      this.getPlayerMostCommonMove() !== null ||\n      this.getComputerMostCommonMove() !== null\n    );\n  }\n\n  private resetHistory(key: Participant): void {\n    this.gameStorage.removeHistory(key);\n  }\n\n  resetHistories(): void {\n    this.resetHistory(PARTICIPANTS.PLAYER);\n    this.resetHistory(PARTICIPANTS.COMPUTER);\n  }\n\n  // ===== Round Methods =====\n\n  getRoundNumber(): number {\n    return this.state.currentMatch?.matchRoundNumber ?? 1;\n  }\n\n  setRoundNumber(value: number): void {\n    if (!this.state.currentMatch) return;\n\n    this.state.currentMatch.matchRoundNumber = value;\n    this.gameStorage.setMatch(this.state.currentMatch);\n  }\n\n  increaseRoundNumber(): void {\n    const current = this.getRoundNumber();\n    this.setRoundNumber(current + 1);\n  }\n\n  // ===== Tara Methods =====\n\n  private decrementTaraCount(key: Participant): void {\n    const current = this.getTaraCount(key);\n    if (current > 1) {\n      this.setTaraCount(key, current - 1);\n    } else if (current === 1) {\n      this.resetTaraCount(key);\n    }\n  }\n\n  private handleTaraMove(key: Participant, move: Move): void {\n    if (move === MOVES.TARA) {\n      const currentTara = this.getTaraCount(key);\n      if (currentTara > 0) {\n        this.decrementTaraCount(key);\n      } else {\n        this.setMove(key, MOVES.ROCK);\n      }\n    }\n  }\n\n  private setTaraCount(key: Participant, value: number): void {\n    this.state.taras[key] = value;\n    this.gameStorage.setTaraCount(key, value);\n  }\n\n  private getTaraCount(key: Participant): number {\n    return this.state.taras[key];\n  }\n\n  private resetTaraCount(key: Participant): void {\n    this.state.taras[key] = 0;\n    this.gameStorage.removeTaraCount(key);\n  }\n\n  setPlayerTaraCount(count: number): void {\n    this.setTaraCount(PARTICIPANTS.PLAYER, count);\n  }\n\n  setComputerTaraCount(count: number): void {\n    this.setTaraCount(PARTICIPANTS.COMPUTER, count);\n  }\n\n  resetTaras(): void {\n    this.resetTaraCount(PARTICIPANTS.PLAYER);\n    this.resetTaraCount(PARTICIPANTS.COMPUTER);\n  }\n\n  getPlayerTaraCount(): number {\n    return this.getTaraCount(PARTICIPANTS.PLAYER);\n  }\n\n  getComputerTaraCount(): number {\n    return this.getTaraCount(PARTICIPANTS.COMPUTER);\n  }\n\n  taraIsEnabled(): boolean {\n    return this.getTaraCount(PARTICIPANTS.PLAYER) > 0;\n  }\n\n  // ===== Match Methods =====\n\n  handleMatchWin(): Participant {\n    const winner = this.getMatchWinner();\n\n    this.setScore(winner, this.getScore(winner) + 1);\n\n    return winner;\n  }\n\n  setMatch(match: Match | null): void {\n    this.state.currentMatch = match;\n    this.gameStorage.setMatch(match);\n  }\n\n  setMatchNumber(matchNumber: number | null): void {\n    this.state.globalMatchNumber = matchNumber;\n    this.gameStorage.setGlobalMatchNumber(matchNumber);\n  }\n\n  /**\n   * Sets default match data if no match is currently active.\n   *\n   * Used as a fallback when no match data is loaded (e.g., from `_loadOrMigrateMatchState()`).\n   * Does not overwrite existing match state.\n   */\n  setDefaultMatchData(): void {\n    const isMatchActive = this.isMatchActive();\n\n    if (!isMatchActive) {\n      this.setMatch({ ...DEFAULT_MATCH });\n    }\n  }\n\n  resetMatchData(): void {\n    this.state.currentMatch = null;\n    this.gameStorage.setMatch(null);\n    this.setMatchNumber(null);\n  }\n\n  getMatchNumber(): number {\n    return this.state.globalMatchNumber ?? 1;\n  }\n\n  isMatchOver(): boolean {\n    return (\n      this.isDefeated(PARTICIPANTS.PLAYER) ||\n      this.isDefeated(PARTICIPANTS.COMPUTER)\n    );\n  }\n\n  getMatchWinner(): Participant {\n    if (this.isDefeated(PARTICIPANTS.PLAYER)) {\n      return PARTICIPANTS.COMPUTER;\n    } else {\n      return PARTICIPANTS.PLAYER;\n    }\n  }\n\n  incrementMatchNumber(): void {\n    const currentMatchNumber = this.getMatchNumber();\n    this.setMatchNumber(currentMatchNumber + 1);\n  }\n\n  /**\n   * Initializes the game state based on available storage.\n   *\n   * This method is called during Model construction. It checks for:\n   * - A valid saved match (loads it and skips migration),\n   * - An old-format global round number (migrates it into a new match),\n   * - Or no valid data (leaves currentMatch unset).\n   *\n   * It also ensures the global match number is set appropriately.\n   */\n  private _loadOrMigrateMatchState(): void {\n    if (this.isMatchActive()) {\n      this._loadExistingMatchState();\n      return;\n    }\n\n    const oldGlobalRoundNumber = this.gameStorage.getOldGlobalRoundNumber();\n\n    if (oldGlobalRoundNumber !== null && oldGlobalRoundNumber > 0) {\n      this._migrateOldData(oldGlobalRoundNumber);\n    }\n    // Otherwise: no migration, and no existing match â€” do nothing.\n  }\n\n  /**\n   * Loads state for an existing match stored in the new format.\n   */\n  private _loadExistingMatchState(): void {\n    this.state.globalMatchNumber = this.gameStorage.getGlobalMatchNumber();\n    this.state.currentMatch = this.gameStorage.getMatch();\n  }\n\n  /**\n   * Migrates match state from an older game version to the current format.\n   *\n   * @param oldRoundNumber - The round number from the old game format.\n   */\n  private _migrateOldData(oldRoundNumber: number): void {\n    const migratedMatch = {\n      matchRoundNumber: oldRoundNumber,\n      playerHealth: INITIAL_HEALTH,\n      computerHealth: INITIAL_HEALTH,\n      initialHealth: INITIAL_HEALTH,\n      damagePerLoss: DAMAGE_PER_LOSS,\n    };\n\n    this.setMatch(migratedMatch);\n    this.gameStorage.removeOldGlobalRoundNumber();\n\n    this.state.globalMatchNumber = 1;\n    this.gameStorage.setGlobalMatchNumber(this.state.globalMatchNumber);\n  }\n\n  // ===== Health Methods =====\n\n  private getHealthKey(participant: Participant): keyof Match {\n    return HEALTH_KEYS[participant];\n  }\n\n  getHealth(participant: Participant): Health {\n    const match = this.state.currentMatch;\n    if (!match) return null;\n\n    const key = this.getHealthKey(participant);\n    const value = match[key];\n\n    return VALID_HEALTH.includes(value as Health) ? (value as Health) : null;\n  }\n\n  private decrementHealth(participant: Participant): boolean {\n    const match = this.state.currentMatch;\n    if (!match) return false;\n\n    const key = this.getHealthKey(participant);\n    const currentHealth = match[key];\n\n    if (currentHealth <= 0) return false;\n\n    match[key] = Math.max(0, currentHealth - DAMAGE_PER_LOSS);\n    return true;\n  }\n\n  private isDefeated(participant: Participant): boolean {\n    const health = this.getHealth(participant);\n    return health !== null && health <= 0;\n  }\n\n  // ===== END OF CLASS =====\n}\n",null,"// =============================================================================\n// ðŸ§± CONFIGURATION FILE: GAME CONSTANTS\n//\n// This module defines all core game data (moves, health, etc.).\n// All move-related constants (lists, maps, types) are generated dynamically\n// from the MOVES_DATABASE to ensure data consistency.\n// =============================================================================\n\nimport { Match, MoveData } from \"./dataObjectUtils\";\n\n// -----------------------------------------------------------------------------\n// SECTION 1: SINGLE SOURCE OF TRUTH (MOVES_DATABASE)\n//\n// This is the only place where a move's definition should be edited.\n// 'as const' ensures TypeScript treats values strictly (e.g., \"rock\" vs. string).\n// -----------------------------------------------------------------------------\nconst MOVES_DATABASE = {\n  ROCK: {\n    id: \"rock\",\n    beats: [\"scissors\"],\n    isStandard: true, // Flag used to filter standard vs. special moves\n    text: \"Rock\",\n    icon: \"ðŸª¨\",\n  },\n  PAPER: {\n    id: \"paper\",\n    beats: [\"rock\"],\n    isStandard: true,\n    text: \"Paper\",\n    icon: \"ðŸ“„\",\n  },\n  SCISSORS: {\n    id: \"scissors\",\n    beats: [\"paper\"],\n    isStandard: true,\n    text: \"Scissors\",\n    icon: \"âœ‚ï¸\",\n  },\n  TARA: {\n    id: \"tara\",\n    beats: [\"rock\", \"paper\", \"scissors\"],\n    isStandard: false,\n    text: \"Tara\",\n    icon: \"â­\",\n  },\n} as const;\n\ntype DbType = typeof MOVES_DATABASE;\n\n// -----------------------------------------------------------------------------\n// SECTION 2: DYNAMIC TYPES (Derived from the Database)\n//\n// These types prevent manual errors. They update automatically when MOVES_DATABASE\n// changes.\n// -----------------------------------------------------------------------------\n\n/**\n * Type: Move\n * A union type of all move IDs defined in the database.\n * Result: \"rock\" | \"paper\" | \"scissors\" | \"tara\"\n */\nexport type Move = DbType[keyof DbType][\"id\"];\n\n/**\n * Type: StandardMove\n * A union type that only includes move IDs where 'isStandard: true'.\n *\n * This uses advanced TypeScript logic (Conditional Types) to automatically filter\n * the database entries.\n * Result: \"rock\" | \"paper\" | \"scissors\"\n */\nexport type StandardMove = {\n  [K in keyof DbType]: DbType[K][\"isStandard\"] extends true\n    ? DbType[K][\"id\"] // Include the ID if the flag is true\n    : never; // Use 'never' to exclude the ID from the final type\n}[keyof DbType];\n\n// -----------------------------------------------------------------------------\n// SECTION 3: DYNAMIC CONSTANTS (Runtime Data Structures)\n//\n// Generated at runtime by mapping over the MOVES_DATABASE.\n// -----------------------------------------------------------------------------\n\n// Helper for iteration\nconst DB_VALUES = Object.values(MOVES_DATABASE);\n\n/**\n * MOVES: Object mapping internal keys to move IDs.\n * { ROCK: \"rock\", PAPER: \"paper\", ... }\n */\nexport const MOVES = Object.fromEntries(\n  Object.entries(MOVES_DATABASE).map(([key, val]) => [key, val.id])\n) as { [K in keyof DbType]: DbType[K][\"id\"] };\n\n/**\n * MOVE_DATA: Array of objects used by the core game logic (name/beats).\n */\nexport const MOVE_DATA = DB_VALUES.map((entry) => ({\n  name: entry.id as Move,\n  beats: entry.beats as readonly Move[],\n}));\n\n// All Move Lists and Maps\nexport const ALL_MOVE_NAMES: Move[] = DB_VALUES.map((entry) => entry.id);\n\nexport const MOVE_DATA_MAP: ReadonlyMap<Move, MoveData> = new Map(\n  MOVE_DATA.map((m) => [m.name, m])\n);\n\n// Standard Move Lists and Maps (Filtered based on 'isStandard' flag)\nexport const STANDARD_MOVE_DATA = MOVE_DATA.filter(\n  (_, i) => DB_VALUES[i].isStandard\n);\n\nexport const STANDARD_MOVE_NAMES = STANDARD_MOVE_DATA.map(\n  (data) => data.name\n) as StandardMove[];\n\nexport const STANDARD_MOVE_DATA_MAP: ReadonlyMap<StandardMove, MoveData> =\n  new Map(STANDARD_MOVE_DATA.map((m) => [m.name as StandardMove, m]));\n\n/**\n * PLAYER_MOVES_DATA: Array used by the View to render cards dynamically.\n * It maps the database structure to the specific data needed by the UI.\n */\nexport const PLAYER_MOVES_DATA = DB_VALUES.map((entry) => ({\n  id: entry.id as Move,\n  text: entry.text,\n  icon: entry.icon,\n}));\n\n/**\n * MOVE_DISPLAY_NAMES: A simple lookup for UI labels.\n * Result: { rock: \"Rock\", paper: \"Paper\", scissors: \"Scissors\", tara: \"Tara\" }\n */\nexport const MOVE_DISPLAY_NAMES: Record<Move, string> = Object.fromEntries(\n  DB_VALUES.map((entry) => [entry.id, entry.text])\n) as Record<Move, string>;\n\n// -----------------------------------------------------------------------------\n// SECTION 4: BASIC GAME CONSTANTS\n// -----------------------------------------------------------------------------\n\nexport const PARTICIPANTS = {\n  PLAYER: \"player\",\n  COMPUTER: \"computer\",\n} as const;\n\nexport const VALID_HEALTH = [0, 50, 100, null] as const;\nexport const INITIAL_ROUND_NUMBER = 1;\nexport const INITIAL_HEALTH = 100;\nexport const DAMAGE_PER_LOSS = 50;\nexport const DEFAULT_MATCH_NUMBER = 1;\n\nexport const DEFAULT_MATCH: Match = {\n  matchRoundNumber: INITIAL_ROUND_NUMBER,\n  playerHealth: INITIAL_HEALTH,\n  computerHealth: INITIAL_HEALTH,\n};\n\nexport const HEALTH_KEYS = {\n  player: \"playerHealth\",\n  computer: \"computerHealth\",\n} as const;\n",null,"import { IGameStorage } from \"./gameStorage\";\nimport {\n  Match,\n  MoveCount,\n  Participant,\n  StandardMove,\n} from \"../utils/dataObjectUtils\";\nimport { MOVES, STANDARD_MOVE_NAMES } from \"../utils/dataUtils\";\n\nconst KEY_SUFFIX_SCORE = \"Score\";\nconst KEY_SUFFIX_TARA_COUNT = \"TaraCount\";\nconst KEY_SUFFIX_MOST_COMMON_MOVE = \"MostCommonMove\";\nconst KEY_SUFFIX_MOVE_COUNTS = \"MoveCounts\";\nconst KEY_SUFFIX_HISTORY = \"History\";\n\nconst KEY_ROUND_NUMBER = \"roundNumber\";\nconst KEY_GLOBAL_MATCH_NUMBER = \"globalMatchNumber\";\nconst KEY_CURRENT_MATCH = \"currentMatch\";\n\nconst DEFAULT_NUMERIC_VALUE = 0;\n\nconst DEFAULT_MOVE_COUNTS: MoveCount = {\n  [MOVES.ROCK]: 0,\n  [MOVES.PAPER]: 0,\n  [MOVES.SCISSORS]: 0,\n};\n\n/**\n * Implementation of IGameStorage using browser's localStorage.\n */\nexport class LocalStorageGameStorage implements IGameStorage {\n  private formatKey(participant: Participant, suffix: string): string {\n    return `${participant}${suffix}`;\n  }\n\n  private safelySetItem(key: string, value: string): void {\n    try {\n      localStorage.setItem(key, value);\n    } catch (e) {\n      console.warn(`LocalStorage Error: Failed to save \"${key}\".`, e);\n    }\n  }\n\n  // ===== Getters =====\n\n  getScore(participant: Participant): number {\n    const key = this.formatKey(participant, KEY_SUFFIX_SCORE);\n    return parseInt(\n      localStorage.getItem(key) || DEFAULT_NUMERIC_VALUE.toString(),\n      10\n    );\n  }\n\n  getTaraCount(participant: Participant): number {\n    const key = this.formatKey(participant, KEY_SUFFIX_TARA_COUNT);\n    return parseInt(\n      localStorage.getItem(key) || DEFAULT_NUMERIC_VALUE.toString(),\n      10\n    );\n  }\n\n  getMostCommonMove(participant: Participant): StandardMove | null {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOST_COMMON_MOVE);\n    const move = localStorage.getItem(key);\n    return move && STANDARD_MOVE_NAMES.includes(move as StandardMove)\n      ? (move as StandardMove)\n      : null;\n  }\n\n  getMoveCounts(participant: Participant): MoveCount {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOVE_COUNTS);\n    try {\n      const raw = localStorage.getItem(key);\n      return raw ? JSON.parse(raw) : DEFAULT_MOVE_COUNTS;\n    } catch (e) {\n      console.warn(`LocalStorage Error: Failed to parse \"${key}\".`, e);\n      return DEFAULT_MOVE_COUNTS;\n    }\n  }\n\n  getGlobalMatchNumber(): number | null {\n    const stored = localStorage.getItem(KEY_GLOBAL_MATCH_NUMBER);\n    return stored !== null ? parseInt(stored, 10) : null;\n  }\n\n  getMatch(): Match | null {\n    try {\n      const raw = localStorage.getItem(KEY_CURRENT_MATCH);\n      return raw ? JSON.parse(raw) : null;\n    } catch (e) {\n      console.warn(`LocalStorage Error: Failed to parse currentMatch.`, e);\n      return null;\n    }\n  }\n\n  getOldGlobalRoundNumber(): number | null {\n    const roundString = localStorage.getItem(KEY_ROUND_NUMBER);\n\n    // If the item doesn't exist in localStorage, getItem returns null.\n    if (roundString === null) {\n      return null;\n    }\n\n    // Attempt to parse the string to an integer.\n    const parsedRound = parseInt(roundString, 10);\n\n    // Check if parsing resulted in NaN (Not a Number), meaning the stored value was invalid.\n    if (isNaN(parsedRound)) {\n      console.warn(\n        `Legacy 'roundNumber' in localStorage (${roundString}) is not a valid number. Skipping migration.`\n      );\n      return null; // Treat invalid data as if it doesn't exist for migration purposes\n    }\n\n    return parsedRound;\n  }\n\n  // ===== Setters =====\n\n  setScore(participant: Participant, score: number): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_SCORE);\n    this.safelySetItem(key, score.toString());\n  }\n\n  setTaraCount(participant: Participant, count: number): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_TARA_COUNT);\n    this.safelySetItem(key, count.toString());\n  }\n\n  setMostCommonMove(participant: Participant, move: StandardMove | null): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOST_COMMON_MOVE);\n    if (move) {\n      this.safelySetItem(key, move);\n    } else {\n      localStorage.removeItem(key);\n    }\n  }\n\n  setMoveCounts(participant: Participant, moveCounts: MoveCount): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOVE_COUNTS);\n    this.safelySetItem(key, JSON.stringify(moveCounts));\n  }\n\n  setGlobalMatchNumber(matchNumber: number | null): void {\n    if (matchNumber) {\n      this.safelySetItem(KEY_GLOBAL_MATCH_NUMBER, matchNumber.toString());\n    } else {\n      localStorage.removeItem(KEY_GLOBAL_MATCH_NUMBER);\n    }\n  }\n\n  setMatch(match: Match | null): void {\n    if (match) {\n      this.safelySetItem(KEY_CURRENT_MATCH, JSON.stringify(match));\n    } else {\n      localStorage.removeItem(KEY_CURRENT_MATCH);\n    }\n  }\n\n  // ===== Removers =====\n\n  removeScore(participant: Participant): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_SCORE);\n    localStorage.removeItem(key);\n  }\n\n  removeTaraCount(participant: Participant): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_TARA_COUNT);\n    localStorage.removeItem(key);\n  }\n\n  removeMostCommonMove(participant: Participant): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOST_COMMON_MOVE);\n    localStorage.removeItem(key);\n  }\n\n  removeMoveCounts(participant: Participant): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_MOVE_COUNTS);\n    localStorage.removeItem(key);\n  }\n\n  removeHistory(participant: Participant): void {\n    const key = this.formatKey(participant, KEY_SUFFIX_HISTORY);\n    localStorage.removeItem(key);\n  }\n\n  removeGlobalMatchNumber(): void {\n    localStorage.removeItem(KEY_GLOBAL_MATCH_NUMBER);\n  }\n\n  removeOldGlobalRoundNumber(): void {\n    localStorage.removeItem(KEY_ROUND_NUMBER);\n  }\n}\n",null,"import { IModel } from \"../model/IModel\";\nimport { IAnnouncementView } from \"../views/announcement/IAnnouncementView\";\nimport { IControlsView } from \"../views/controls/IControlsView\";\nimport { IGameView } from \"../views/game/IGameView\";\nimport { IMenuView } from \"../views/menu/IMenuView\";\nimport { IMoveRevealView } from \"../views/moveReveal/IMoveRevealView\";\nimport { IProgressView } from \"../views/progress/IProgressView\";\nimport { IStatsView } from \"../views/stats/IStatsView\";\nimport { IStatusView } from \"../views/status/IStatusView\";\nimport { Move } from \"../utils/dataObjectUtils\";\nimport {\n  MOVE_DISPLAY_NAMES,\n  PARTICIPANTS,\n  PLAYER_MOVES_DATA,\n} from \"../utils/dataUtils\";\n\nexport class Controller {\n  private model: IModel;\n  private announcementView: IAnnouncementView;\n  private controlsView: IControlsView;\n  private gameView: IGameView;\n  private menuView: IMenuView;\n  private moveRevealView: IMoveRevealView;\n  private progressView: IProgressView;\n  private statsView: IStatsView;\n  private statusView: IStatusView;\n\n  constructor(\n    model: IModel,\n    views: {\n      announcementView: IAnnouncementView;\n      controlsView: IControlsView;\n      gameView: IGameView;\n      menuView: IMenuView;\n      moveRevealView: IMoveRevealView;\n      progressView: IProgressView;\n      statsView: IStatsView;\n      statusView: IStatusView;\n    }\n  ) {\n    this.model = model;\n    this.announcementView = views.announcementView;\n    this.controlsView = views.controlsView;\n    this.gameView = views.gameView;\n    this.menuView = views.menuView;\n    this.moveRevealView = views.moveRevealView;\n    this.progressView = views.progressView;\n    this.statsView = views.statsView;\n    this.statusView = views.statusView;\n  }\n\n  private updateControlsView(): void {\n    this.controlsView.render({\n      playerMove: this.model.getPlayerMove(),\n      isMatchOver: this.model.isMatchOver(),\n      taraIsEnabled: this.model.taraIsEnabled(),\n      moves: PLAYER_MOVES_DATA,\n    });\n  }\n\n  private updateProgressView(options: { isVisible: boolean }): void {\n    this.progressView.update({\n      matchNumber: this.model.getMatchNumber(),\n      roundNumber: this.model.getRoundNumber(),\n      isVisible: options.isVisible,\n    });\n  }\n\n  private updateScoreView(): void {\n    this.statsView.updateScores(\n      this.model.getPlayerScore(),\n      this.model.getComputerScore()\n    );\n  }\n\n  private updateTaraView(): void {\n    this.statsView.updateTaraCounts(\n      this.model.getPlayerTaraCount(),\n      this.model.getComputerTaraCount()\n    );\n  }\n\n  private updateMostCommonMoveView(): void {\n    this.statsView.updateMostCommonMoves(\n      this.model.getPlayerMostCommonMove(),\n      this.model.getComputerMostCommonMove()\n    );\n  }\n\n  private updateHealthView(): void {\n    const playerHealth = this.model.getHealth(PARTICIPANTS.PLAYER);\n    const computerHealth = this.model.getHealth(PARTICIPANTS.COMPUTER);\n\n    this.statsView.updateHealthBar(PARTICIPANTS.PLAYER, playerHealth);\n    this.statsView.updateHealthBar(PARTICIPANTS.COMPUTER, computerHealth);\n  }\n\n  private async startGame(): Promise<void> {\n    this.model.setDefaultMatchData();\n\n    this.gameView.toggleVisibility(true);\n    this.updateProgressView({ isVisible: true });\n    this.menuView.toggleMenuVisibility(false);\n    this.statsView.toggleGameStatsVisibility(true);\n    this.statusView.setMessage(\"Get ready...\");\n\n    this.updateControlsView();\n    this.updateHealthView();\n    this.controlsView.toggleVisibility(true);\n\n    await this.controlsView.flipAll(true);\n\n    this.statusView.setMessage(\"Choose your attack!\");\n  }\n\n  private endRound(): void {\n    const playerMove = this.model.getPlayerMove();\n    const computerMove = this.model.getComputerMove();\n    const result = this.model.evaluateRound();\n    const matchActuallyEnded = this.model.isMatchOver();\n\n    this.updateHealthView();\n\n    let resultMessage = result.toUpperCase();\n    if (matchActuallyEnded) {\n      const winner = this.model.handleMatchWin();\n      resultMessage = `${winner.toUpperCase()} WON THE MATCH!`;\n      this.model.incrementMatchNumber();\n      this.model.setMatch(null);\n    } else {\n      this.model.increaseRoundNumber();\n    }\n\n    this.statusView.setMessage(\n      `You played ${MOVE_DISPLAY_NAMES[playerMove]}. Computer played ${MOVE_DISPLAY_NAMES[computerMove]}.`\n    );\n\n    this.announcementView.setMessage(resultMessage);\n\n    this.controlsView.render({\n      playerMove: this.model.getPlayerMove(),\n      isMatchOver: matchActuallyEnded,\n      taraIsEnabled: this.model.taraIsEnabled(),\n      moves: PLAYER_MOVES_DATA,\n    });\n\n    this.updateScoreView();\n    this.updateTaraView();\n    this.updateMostCommonMoveView();\n  }\n\n  private async handleNextRound(): Promise<void> {\n    this.model.resetMoves();\n    this.model.setDefaultMatchData();\n\n    this.updateHealthView();\n    this.updateProgressView({ isVisible: true });\n\n    this.announcementView.setMessage(\"\");\n    this.moveRevealView.toggleVisibility(false);\n\n    this.updateControlsView();\n\n    this.statusView.setMessage(\"Prepare your next move...\");\n    await this.controlsView.flipAll(true);\n\n    this.statusView.setMessage(\"Choose your attack!\");\n  }\n\n  async resetGameState(): Promise<void> {\n    this.model.resetScores();\n    this.model.resetMoves();\n    this.model.resetTaras();\n    this.model.resetHistories();\n    this.model.resetBothMoveCounts();\n    this.model.resetMostCommonMoves();\n    this.model.resetMatchData();\n\n    const isMatchActive = this.model.isMatchActive();\n\n    this.updateScoreView();\n    this.updateTaraView();\n    this.updateHealthView();\n    this.updateMostCommonMoveView();\n    this.updateControlsView();\n\n    this.moveRevealView.toggleVisibility(false);\n    this.controlsView.toggleVisibility(false);\n    this.menuView.updateMenu({ isMatchActive });\n    this.announcementView.setMessage(\"\");\n  }\n\n  async handlePlayerMove(move: Move): Promise<void> {\n    this.model.registerPlayerMove(move);\n    this.model.chooseComputerMove();\n\n    this.statusView.setMessage(\"Locking in move...\");\n    await this.controlsView.flipAll(false);\n\n    this.moveRevealView.render({\n      playerMoveId: this.model.getPlayerMove(),\n      computerMoveId: this.model.getComputerMove(),\n    });\n\n    this.statusView.setMessage(\"Revealing moves...\");\n    this.moveRevealView.toggleVisibility(true);\n\n    // 1. Wait for the initial flip\n    await this.moveRevealView.flipCards();\n\n    // 2. Determine if we need to highlight\n    const pMove = this.model.getPlayerMove();\n    const cMove = this.model.getComputerMove();\n\n    // Note: Ensure doesMoveBeat is public in your Model!\n    if (pMove && cMove && pMove !== cMove) {\n      const playerWins = this.model.doesMoveBeat(pMove, cMove);\n      // 3. This now returns a Promise that waits for the CSS transition\n      await this.moveRevealView.highlightWinner(\n        playerWins ? \"player\" : \"computer\"\n      );\n    } else {\n      // 4. If it's a tie, add a tiny organic pause so it doesn't feel \"instant\"\n      // This is optional, but helps UX when there is no animation to wait for.\n      await new Promise((resolve) => requestAnimationFrame(resolve));\n    }\n\n    this.endRound();\n  }\n\n  async initialize(): Promise<void> {\n    const isMatchActive = this.model.isMatchActive();\n\n    this.menuView.render({ isMatchActive });\n\n    this.progressView.render({\n      matchNumber: this.model.getMatchNumber(),\n      roundNumber: this.model.getRoundNumber(),\n      isVisible: false,\n    });\n\n    this.announcementView.render({ message: \"\" });\n    this.statusView.render({ message: \"\" });\n\n    this.updateControlsView();\n    this.updateScoreView();\n    this.updateTaraView();\n    this.updateMostCommonMoveView();\n\n    this.menuView.updateMenu({ isMatchActive });\n    this.statsView.toggleGameStatsVisibility(false);\n    this.controlsView.toggleVisibility(false);\n    this.menuView.toggleMenuVisibility(true);\n\n    this.menuView.bindStartMatch(() => this.startGame());\n    this.menuView.bindResetGame(() => this.resetGameState());\n    this.controlsView.bindPlayerMove((move) => this.handlePlayerMove(move));\n    this.controlsView.bindNextRound(() => this.handleNextRound());\n  }\n}\n",null,"import View from \"../View\";\nimport { IAnnouncementView, AnnouncementViewData } from \"./IAnnouncementView\";\n\nexport default class AnnouncementView\n  extends View<AnnouncementViewData>\n  implements IAnnouncementView\n{\n  protected declare _parentElement: HTMLElement;\n  private _messageElement: HTMLElement | null = null;\n\n  public render(data: AnnouncementViewData): void {\n    this._parentElement = this._getElement<HTMLElement>(\n      \"announcement-container\"\n    );\n    super.render(data);\n    // Cache the element right after rendering\n    this._messageElement = this._parentElement.querySelector(\"#announcement\");\n  }\n\n  protected _generateMarkup(): string {\n    return `<h2 id=\"announcement\">${this._data.message}</h2>`;\n  }\n\n  public setMessage(message: string): void {\n    this._data = { message };\n    if (this._messageElement) {\n      this._messageElement.textContent = message;\n    } else {\n      // Fallback in case setMessage is called before render\n      const el = document.getElementById(\"announcement\");\n      if (el) el.textContent = message;\n    }\n  }\n}\n",null,"export default abstract class View<T = any> {\n  protected _data!: T;\n  protected _parentElement!: HTMLElement;\n\n  /**\n   * Standard render method used by all views.\n   *\n   * @param data The state/data needed for the UI render.\n   */\n  public render(data: T): void {\n    if (!data) return;\n    this._data = data;\n\n    const markup = this._generateMarkup();\n    this._clear();\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n  }\n\n  /**\n   * Patches the DOM by comparing new markup to current nodes.\n   *\n   * @note Requires `_generateMarkup()` to return a single root element.\n   * @note Best for data updates (health/scores); use `render()` if the\n   * number of elements or the DOM structure changes.\n   *\n   * @param data The state/data needed for the UI update.\n   */\n  public update(data: T): void {\n    this._data = data;\n\n    const newMarkup = this._generateMarkup();\n    const newDOM = document.createRange().createContextualFragment(newMarkup);\n    const newElements = Array.from(newDOM.querySelectorAll(\"*\"));\n    const currentElements = Array.from(\n      this._parentElement.querySelectorAll(\"*\")\n    );\n\n    newElements.forEach((newElement, i) => {\n      const currentElement = currentElements[i];\n\n      // 1. Update changed TEXT\n      if (\n        !newElement.isEqualNode(currentElement) &&\n        newElement.firstChild?.nodeValue?.trim() !== \"\" &&\n        newElement.firstChild?.nodeValue?.trim() !== undefined\n      ) {\n        currentElement.textContent = newElement.textContent;\n      }\n\n      // 2. Update changed ATTRIBUTES\n      if (!newElement.isEqualNode(currentElement)) {\n        // Add or update attributes from new to current\n        Array.from(newElement.attributes).forEach((attr) =>\n          currentElement.setAttribute(attr.name, attr.value)\n        );\n\n        // Remove attributes from current that aren't in new\n        Array.from(currentElement.attributes).forEach((attr) => {\n          if (!newElement.hasAttribute(attr.name)) {\n            currentElement.removeAttribute(attr.name);\n          }\n        });\n      }\n    });\n  }\n\n  protected _clear(): void {\n    this._parentElement.innerHTML = \"\";\n  }\n\n  /**\n   * Generates the HTML string for the view.\n   *\n   * @note Must return a single root element string to support DOM diffing with `update()`.\n   * @returns {string} The HTML markup.\n   */\n  protected abstract _generateMarkup(): string;\n\n  protected _getElement<T extends HTMLElement>(id: string): T {\n    const element = document.getElementById(id);\n    if (!element) throw new Error(`Element #${id} not found.`);\n    return element as T;\n  }\n\n  protected _toggleVisibility(element: HTMLElement, show: boolean): void {\n    element.classList.toggle(\"hidden\", !show);\n\n    if (show) {\n      element.removeAttribute(\"inert\");\n    } else {\n      element.setAttribute(\"inert\", \"\");\n    }\n  }\n\n  protected _waitForAnimation(element: HTMLElement): Promise<void> {\n    return new Promise((resolve) => {\n      const duration = parseFloat(getComputedStyle(element).transitionDuration);\n\n      // If no duration (tests) or already hidden, resolve immediately\n      if (!duration || duration === 0) {\n        resolve();\n        return;\n      }\n\n      const handler = (e: TransitionEvent) => {\n        // Only resolve for the main transform/opacity, not every sub-property\n        if (e.target === element) {\n          element.removeEventListener(\"transitionend\", handler);\n          resolve();\n        }\n      };\n\n      element.addEventListener(\"transitionend\", handler);\n    });\n  }\n}\n",null,"import View from \"../View\";\nimport { Move } from \"../../utils/dataObjectUtils\";\nimport { ControlsViewData, IControlsView } from \"./IControlsView\";\n\nexport default class ControlsView\n  extends View<ControlsViewData>\n  implements IControlsView\n{\n  protected declare _parentElement: HTMLElement;\n  private _moveHandler?: (move: Move) => void;\n  private _nextRoundHandler?: () => void;\n  // Track visual state to prevent markup-regressions during render\n  private _isFaceUp: boolean = false;\n\n  public render(data: ControlsViewData): void {\n    this._parentElement = this._getElement<HTMLElement>(\"game-controls\");\n    super.render(data);\n    this._setupListeners();\n  }\n\n  /**\n   * Orchestrates the 3D flip for all choice cards.\n   * @param faceUp - True to show icons, False to show \"BACK\"\n   */\n  public async flipAll(faceUp: boolean): Promise<void> {\n    this._isFaceUp = faceUp;\n    const cards = this._parentElement.querySelectorAll(\".card-inner\");\n\n    if (cards.length === 0) return;\n\n    // Read 'offsetHeight' to force the browser to paint the cards\n    // in their current state (visible but 0deg) BEFORE we add the class.\n    // This ensures the transition actually runs.\n    const _forceReflow = (cards[0] as HTMLElement).offsetHeight;\n\n    cards.forEach((card) => {\n      faceUp\n        ? card.classList.add(\"is-flipped\")\n        : card.classList.remove(\"is-flipped\");\n    });\n\n    // Wait for the transition\n    await this._waitForAnimation(cards[0] as HTMLElement);\n  }\n\n  protected _generateMarkup(): string {\n    const { playerMove, isMatchOver, moves, taraIsEnabled } = this._data;\n\n    if (!playerMove) {\n      return `\n      <div id=\"choices\" role=\"group\" aria-label=\"Select your move\">\n        ${moves\n          .map((move) => {\n            const disabled = move.id === \"tara\" && !taraIsEnabled;\n            // Maintain current flip state during re-renders\n            const flipClass = this._isFaceUp ? \"is-flipped\" : \"\";\n\n            return `\n            <button id=\"${move.id}\" class=\"card-button\" ${\n              disabled ? \"disabled\" : \"\"\n            }>\n              <div class=\"card-inner ${flipClass}\">\n                <div class=\"card-back player-theme\"></div>\n                <div class=\"card-front\">\n                  <span class=\"icon\" aria-hidden=\"true\">${move.icon}</span>\n                  <span class=\"label\">${move.text}</span>\n                </div>\n              </div>\n            </button>`;\n          })\n          .join(\"\")}\n      </div>`;\n    }\n\n    return `\n    <div id=\"progression-zone\" aria-live=\"polite\">\n      <button id=\"play-again\" class=\"btn-primary\">\n        ${isMatchOver ? \"Start New Match\" : \"Next Round\"}\n      </button>\n    </div>`;\n  }\n\n  public toggleVisibility(show: boolean): void {\n    if (!this._parentElement) {\n      this._parentElement = this._getElement<HTMLElement>(\"game-controls\");\n    }\n    this._toggleVisibility(this._parentElement, show);\n  }\n\n  public bindPlayerMove(handler: (move: Move) => void) {\n    this._moveHandler = handler;\n  }\n  public bindNextRound(handler: () => void) {\n    this._nextRoundHandler = handler;\n  }\n\n  private _setupListeners(): void {\n    this._parentElement.onclick = (e: MouseEvent) => {\n      const target = e.target as HTMLElement;\n      const moveBtn = target.closest(\".card-button\");\n      const nextBtn = target.closest(\"#play-again\");\n\n      if (moveBtn && this._moveHandler) this._moveHandler(moveBtn.id as Move);\n      if (nextBtn && this._nextRoundHandler) this._nextRoundHandler();\n    };\n  }\n}\n",null,"import View from \"../View\";\nimport { IGameView } from \"./IGameView\";\n\nexport default class GameView extends View implements IGameView {\n  protected declare _parentElement: HTMLElement;\n\n  private _ensureParentElement(): void {\n    if (!this._parentElement || !document.body.contains(this._parentElement)) {\n      this._parentElement = this._getElement(\"game-container\");\n    }\n  }\n\n  public toggleVisibility(show: boolean): void {\n    this._ensureParentElement();\n    this._toggleVisibility(this._parentElement, show);\n  }\n\n  // Satisfy the abstract requirement without doing anything\n  protected _generateMarkup(): string {\n    return \"\";\n  }\n}\n",null,"import View from \"../View\";\nimport { IMenuView, MenuViewData } from \"./IMenuView\";\n\nexport default class MenuView extends View<MenuViewData> implements IMenuView {\n  protected declare _parentElement: HTMLElement;\n  // Cache the specific buttons\n  private _startBtn?: HTMLButtonElement;\n  private _resetBtn?: HTMLButtonElement;\n\n  protected _generateMarkup(): string {\n    const startText = this._data.isMatchActive\n      ? \"Continue Match\"\n      : \"Start Match\";\n\n    return `\n      <div class=\"menu-content\">\n        <h1 id=\"game-title\" class=\"title-large\">Rock Paper Scissors Tara</h1>\n        <div class=\"menu-controls\">\n          <button id=\"start\" class=\"btn-primary\">${startText}</button>\n          <button id=\"reset-game-state\" class=\"btn-secondary\">Reset Game State</button>\n        </div>\n      </div>\n    `;\n  }\n\n  private _ensureParentElement(): void {\n    if (!this._parentElement || !document.body.contains(this._parentElement)) {\n      this._parentElement = this._getElement(\"main-menu\");\n    }\n  }\n\n  public render(data: MenuViewData): void {\n    this._ensureParentElement();\n    super.render(data);\n\n    // Cache the elements immediately after they are injected into the DOM\n    this._startBtn = this._getElement<HTMLButtonElement>(\"start\");\n    this._resetBtn = this._getElement<HTMLButtonElement>(\"reset-game-state\");\n  }\n\n  // ===== Event Bindings (Much more efficient now) =====\n\n  public bindStartMatch(handler: () => void): void {\n    this._startBtn?.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      handler();\n    });\n  }\n\n  public bindResetGame(handler: () => void): void {\n    this._resetBtn?.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      handler();\n    });\n  }\n\n  public toggleMenuVisibility(show: boolean): void {\n    this._ensureParentElement();\n    this._toggleVisibility(this._parentElement, show);\n  }\n\n  public updateMenu(data: Partial<MenuViewData>): void {\n    this._data = { ...this._data, ...data };\n    this.update(this._data);\n\n    // After an update, re-cache in case elements were replaced\n    this._startBtn = this._getElement<HTMLButtonElement>(\"start\");\n    this._resetBtn = this._getElement<HTMLButtonElement>(\"reset-game-state\");\n  }\n}\n",null,"import View from \"../View\";\nimport { IMoveRevealView, MoveRevealData } from \"./IMoveRevealView\";\nimport { PLAYER_MOVES_DATA, PARTICIPANTS } from \"../../utils/dataUtils\";\nimport { Participant } from \"../../utils/dataObjectUtils\";\n\nexport default class MoveRevealView\n  extends View<MoveRevealData>\n  implements IMoveRevealView\n{\n  protected _parentElement = document.getElementById(\n    \"move-reveal\"\n  ) as HTMLElement;\n\n  protected _generateMarkup(): string {\n    const { playerMoveId, computerMoveId } = this._data;\n    const playerMove = PLAYER_MOVES_DATA.find(\n      (move) => move.id === playerMoveId\n    );\n    const computerMove = PLAYER_MOVES_DATA.find(\n      (move) => move.id === computerMoveId\n    );\n\n    if (!playerMove || !computerMove) return \"\";\n\n    const renderCard = (\n      move: any,\n      theme: \"player-theme\" | \"computer-theme\"\n    ) => `\n      <div class=\"card\" data-id=\"${move.id}\">\n        <div class=\"card-inner\">\n          <div class=\"card-back ${theme}\"></div> <div class=\"card-front\">\n            <span class=\"icon\">${move.icon}</span>\n            <span class=\"label\">${move.text}</span>\n          </div>\n        </div>\n      </div>\n    `;\n\n    return `\n      ${renderCard(playerMove, \"player-theme\")}\n      <span class=\"vs-label\">VS</span>\n      ${renderCard(computerMove, \"computer-theme\")}\n    `;\n  }\n\n  public toggleVisibility(show: boolean): void {\n    if (!show) {\n      this._parentElement.querySelectorAll(\".card\").forEach((el) => {\n        el.classList.remove(\"winner-highlight\");\n      });\n    }\n    this._toggleVisibility(this._parentElement, show);\n  }\n\n  public async flipCards(): Promise<void> {\n    const cards = this._parentElement.querySelectorAll(\".card-inner\");\n    if (cards.length === 0) return;\n\n    // Force Reflow\n    const _forceReflow = (cards[0] as HTMLElement).offsetHeight;\n\n    cards.forEach((card) => card.classList.add(\"is-flipped\"));\n\n    await this._waitForAnimation(cards[0] as HTMLElement);\n  }\n\n  public async highlightWinner(participant: Participant): Promise<void> {\n    const selector =\n      participant === PARTICIPANTS.PLAYER ? \".player-theme\" : \".computer-theme\";\n    const winningCard = this._parentElement\n      .querySelector(selector)\n      ?.closest(\".card\") as HTMLElement;\n\n    if (winningCard) {\n      winningCard.classList.add(\"winner-highlight\");\n      await this._waitForAnimation(winningCard);\n    }\n  }\n}\n",null,"import View from \"../View\";\nimport { IProgressView, ProgressData } from \"./IProgressView\";\n\nexport default class ProgressView\n  extends View<ProgressData>\n  implements IProgressView\n{\n  protected declare _parentElement: HTMLElement;\n\n  private _ensureParentElement(): void {\n    if (!this._parentElement || !document.body.contains(this._parentElement)) {\n      this._parentElement = this._getElement(\"game-progress-container\");\n    }\n  }\n\n  protected _generateMarkup(): string {\n    return `\n      <h2 id=\"match\">Match ${this._data.matchNumber}</h1>\n      <h1 id=\"round\">Round ${this._data.roundNumber}</h2>\n    `;\n  }\n\n  /**\n   * Initial display of the progress section\n   */\n  public render(data: ProgressData): void {\n    this._ensureParentElement();\n    super.render(data);\n    this._toggleVisibility(this._parentElement, data.isVisible);\n  }\n\n  /**\n   * Updates Match and Round numbers and visibility\n   */\n  public update(data: ProgressData): void {\n    this._ensureParentElement();\n    super.update(data);\n    this._toggleVisibility(this._parentElement, data.isVisible);\n  }\n}\n",null,"import View from \"../View\";\nimport { IStatsView } from \"./IStatsView\";\nimport { Health, Participant, StandardMove } from \"../../utils/dataObjectUtils\";\n\nexport default class StatsView extends View implements IStatsView {\n  protected declare _parentElement: HTMLElement;\n\n  private get _computerHealthBarElement() {\n    return this._getElement<HTMLElement>(\"computer-health\");\n  }\n\n  private get _computerMostCommonMoveElement() {\n    return this._getElement<HTMLElement>(\"computer-most-common-move\");\n  }\n\n  private get _computerScoreElement() {\n    return this._getElement<HTMLElement>(\"computer-score\");\n  }\n\n  private get _computerTaraCountElement() {\n    return this._getElement<HTMLElement>(\"computer-tara\");\n  }\n\n  private get _playerHealthBarElement() {\n    return this._getElement<HTMLElement>(\"player-health\");\n  }\n\n  private get _playerMostCommonMoveElement() {\n    return this._getElement<HTMLElement>(\"player-most-common-move\");\n  }\n\n  private get _playerScoreElement() {\n    return this._getElement<HTMLElement>(\"player-score\");\n  }\n\n  private get _playerTaraCountElement() {\n    return this._getElement<HTMLElement>(\"player-tara\");\n  }\n\n  // ===== General Methods =====\n\n  // Satisfy the abstract requirement without doing anything\n  protected _generateMarkup(): string {\n    return \"\";\n  }\n\n  public render(): void {\n    this._parentElement = this._getElement<HTMLElement>(\"game-stats\");\n\n    // DO NOT call super.render().\n    // Calling super.render() triggers _clear()\n  }\n\n  public toggleGameStatsVisibility(show: boolean) {\n    this._parentElement = this._getElement(\"game-stats\");\n    this._toggleVisibility(this._parentElement, show);\n  }\n\n  // ===== Health Methods =====\n\n  public updateHealthBar(participant: Participant, health: Health): void {\n    const bar = this._getHealthBar(participant);\n\n    // Directly set width percentage\n    bar.style.width = `${health}%`;\n  }\n\n  private _getHealthBar(participant: Participant): HTMLElement {\n    return participant === \"player\"\n      ? this._playerHealthBarElement\n      : this._computerHealthBarElement;\n  }\n\n  // ===== History Methods =====\n\n  updateMostCommonMoves(\n    player: StandardMove | null,\n    computer: StandardMove | null\n  ): void {\n    this._playerMostCommonMoveElement.textContent = player ?? \"N/A\";\n    this._computerMostCommonMoveElement.textContent = computer ?? \"N/A\";\n  }\n\n  // ===== Score Methods =====\n\n  public updateScores(player: number, computer: number): void {\n    this._playerScoreElement.textContent = player!.toString().padStart(2, \"0\");\n    this._computerScoreElement.textContent = computer!\n      .toString()\n      .padStart(2, \"0\");\n  }\n\n  // ===== Tara Methods =====\n\n  updateTaraCounts(playerCount: number, computerCount: number): void {\n    this._playerTaraCountElement.textContent = playerCount.toString();\n    this._computerTaraCountElement.textContent = computerCount.toString();\n  }\n}\n",null,"import View from \"../View\";\nimport { IStatusView, StatusViewData } from \"./IStatusView\";\n\nexport default class StatusView\n  extends View<StatusViewData>\n  implements IStatusView\n{\n  protected declare _parentElement: HTMLElement;\n  private _messageElement: HTMLElement | null = null;\n\n  public render(data: StatusViewData): void {\n    this._parentElement = this._getElement<HTMLElement>(\"status-container\");\n    super.render(data);\n    // Cache the element right after rendering\n    this._messageElement = this._parentElement.querySelector(\"#status\");\n  }\n\n  protected _generateMarkup(): string {\n    return `<p id=\"status\">${this._data.message}</p>`;\n  }\n\n  public setMessage(message: string): void {\n    this._data = { message };\n    if (this._messageElement) {\n      this._messageElement.textContent = message;\n    } else {\n      // Fallback in case setMessage is called before render\n      const el = document.getElementById(\"status\");\n      if (el) el.textContent = message;\n    }\n  }\n}\n",null],"names":["$71f329d8a7c8539f$var$MOVES_DATABASE","ROCK","id","beats","isStandard","text","icon","PAPER","SCISSORS","TARA","$71f329d8a7c8539f$var$DB_VALUES","Object","values","$71f329d8a7c8539f$export$67f072146e5978c8","fromEntries","entries","map","key","val","$71f329d8a7c8539f$export$97019d86eac04150","entry","name","$71f329d8a7c8539f$export$31531e938145c246","$71f329d8a7c8539f$export$f1cdc934597ad339","Map","m","$71f329d8a7c8539f$export$e004b108e63e350d","filter","_","i","$71f329d8a7c8539f$export$11a493a8727aac2a","data","$71f329d8a7c8539f$export$e9c8ae7fd9d592e6","$71f329d8a7c8539f$export$d84a9a46fef476ea","$71f329d8a7c8539f$export$981020f3c64bb064","$71f329d8a7c8539f$export$2de13e891a662beb","matchRoundNumber","playerHealth","computerHealth","$71f329d8a7c8539f$export$3528b598622357c7","player","computer","$dc0137b9424d8dd1$var$KEY_SUFFIX_SCORE","$dc0137b9424d8dd1$var$KEY_SUFFIX_TARA_COUNT","$dc0137b9424d8dd1$var$KEY_SUFFIX_MOST_COMMON_MOVE","$dc0137b9424d8dd1$var$KEY_SUFFIX_MOVE_COUNTS","$dc0137b9424d8dd1$var$KEY_ROUND_NUMBER","$dc0137b9424d8dd1$var$KEY_GLOBAL_MATCH_NUMBER","$dc0137b9424d8dd1$var$KEY_CURRENT_MATCH","$dc0137b9424d8dd1$var$DEFAULT_MOVE_COUNTS","$dc0137b9424d8dd1$export$77bd854ea05fa7f7","formatKey","participant","suffix","safelySetItem","value","localStorage","setItem","e","console","warn","getScore","parseInt","getItem","$dc0137b9424d8dd1$var$DEFAULT_NUMERIC_VALUE","getTaraCount","getMostCommonMove","move","includes","getMoveCounts","raw","JSON","parse","getGlobalMatchNumber","stored","getMatch","getOldGlobalRoundNumber","roundString","parsedRound","isNaN","setScore","score","toString","setTaraCount","count","setMostCommonMove","removeItem","setMoveCounts","moveCounts","stringify","setGlobalMatchNumber","matchNumber","setMatch","match","removeScore","removeTaraCount","removeMostCommonMove","removeMoveCounts","removeHistory","removeGlobalMatchNumber","removeOldGlobalRoundNumber","$98c16915bb808846$export$a1edc412be3e1841","state","scores","moves","taras","mostCommonMove","rock","paper","scissors","globalMatchNumber","currentMatch","gameStorage","_loadOrMigrateMatchState","doesMoveBeat","a","b","get","handleRoundWin","winner","winningMove","isStandardMove","currentTara","evaluateRound","playerMove","getPlayerMove","computerMove","getComputerMove","handleTaraMove","decrementHealth","isMatchActive","resetScore","setPlayerScore","setComputerScore","getPlayerScore","getComputerScore","resetScores","setMove","getMove","determineMostCommonMove","highestCount","hasMoveFrequencyTie","resetMostCommonMove","getAvailableMoves","hasTara","getBaseWeights","getTaraWeight","scoreDiff","Math","min","getStandardMoveWeights","weights","mostCommon","counter","counterMap","chooseWeightedRandomMove","weightedPool","flatMap","Array","fill","randomIndex","floor","random","length","getComputerMoveWeights","baseWeights","taraWeight","standardWeights","getWeightedComputerMove","getComputerTaraCount","availableMoves","setPlayerMove","setComputerMove","resetMoves","chooseComputerMove","registerComputerMove","registerPlayerMove","setPlayerMostCommonMove","setComputerMostCommonMove","resetMostCommonMoves","getPlayerMostCommonMove","getComputerMostCommonMove","resetMoveCounts","resetBothMoveCounts","showMostCommonMove","resetHistory","resetHistories","getRoundNumber","setRoundNumber","increaseRoundNumber","current","decrementTaraCount","resetTaraCount","setPlayerTaraCount","setComputerTaraCount","resetTaras","getPlayerTaraCount","taraIsEnabled","handleMatchWin","getMatchWinner","setMatchNumber","setDefaultMatchData","resetMatchData","getMatchNumber","isMatchOver","isDefeated","incrementMatchNumber","currentMatchNumber","_loadExistingMatchState","oldGlobalRoundNumber","_migrateOldData","oldRoundNumber","initialHealth","damagePerLoss","getHealthKey","getHealth","currentHealth","max","health","$44521653474fa731$export$bd0bf19f25da8474","model","announcementView","controlsView","gameView","menuView","moveRevealView","progressView","statsView","statusView","views","updateControlsView","render","updateProgressView","options","update","roundNumber","isVisible","updateScoreView","updateScores","updateTaraView","updateTaraCounts","updateMostCommonMoveView","updateMostCommonMoves","updateHealthView","updateHealthBar","startGame","toggleVisibility","toggleMenuVisibility","toggleGameStatsVisibility","setMessage","flipAll","endRound","result","matchActuallyEnded","resultMessage","toUpperCase","handleNextRound","resetGameState","updateMenu","handlePlayerMove","playerMoveId","computerMoveId","flipCards","pMove","cMove","playerWins","highlightWinner","Promise","resolve","requestAnimationFrame","initialize","message","bindStartMatch","bindResetGame","bindPlayerMove","bindNextRound","$12d839d74afa7795$export$2e2bcd8739ae039","_data","_parentElement","markup","_generateMarkup","_clear","insertAdjacentHTML","newMarkup","newElements","from","newDOM","document","createRange","createContextualFragment","querySelectorAll","currentElements","forEach","newElement","currentElement","isEqualNode","firstChild","nodeValue","trim","undefined","textContent","attributes","attr","setAttribute","hasAttribute","removeAttribute","innerHTML","_getElement","element","getElementById","Error","_toggleVisibility","show","classList","toggle","_waitForAnimation","duration","parseFloat","getComputedStyle","transitionDuration","handler","target","removeEventListener","addEventListener","$fec01fd9bb0db177$export$2e2bcd8739ae039","_messageElement","querySelector","el","$49b533f33fbcd4f0$export$2e2bcd8739ae039","_moveHandler","_nextRoundHandler","_isFaceUp","_setupListeners","faceUp","cards","offsetHeight","card","add","remove","disabled","flipClass","join","onclick","moveBtn","closest","nextBtn","$479a56ea6df29526$export$2e2bcd8739ae039","_ensureParentElement","body","contains","$8e914c20156285d4$export$2e2bcd8739ae039","_startBtn","_resetBtn","startText","preventDefault","$0ad4938d4388d231$export$2e2bcd8739ae039","find","renderCard","theme","winningCard","$c1a744efd25a44ca$export$2e2bcd8739ae039","$b396eb86f0686586$export$2e2bcd8739ae039","_computerHealthBarElement","_computerMostCommonMoveElement","_computerScoreElement","_computerTaraCountElement","_playerHealthBarElement","_playerMostCommonMoveElement","_playerScoreElement","_playerTaraCountElement","bar","_getHealthBar","style","width","padStart","playerCount","computerCount","$067e764345c4c27f$export$2e2bcd8739ae039","controller"],"version":3,"file":"public.5015489d.js.map"}