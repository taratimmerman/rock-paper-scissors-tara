const e={PLAYER:"player",COMPUTER:"computer"},t={ROCK:"rock",PAPER:"paper",SCISSORS:"scissors",TARA:"tara"},o=[{name:t.ROCK,beats:[t.SCISSORS]},{name:t.PAPER,beats:[t.ROCK]},{name:t.SCISSORS,beats:[t.PAPER]},{name:t.TARA,beats:[t.ROCK,t.PAPER,t.SCISSORS]}],r=new Map(o.map(e=>[e.name,e])),a=new Map(o.filter(e=>e.name!==t.TARA).map(e=>[e.name,e]));class s{constructor(){this.state={scores:{player:0,computer:0},moves:{player:null,computer:null},taras:{player:0,computer:0},roundNumber:1},this.state.scores.player=this.getPlayerScoreFromStorage(),this.state.scores.computer=this.getComputerScoreFromStorage(),this.state.taras.player=this.getPlayerTaraCountFromStorage(),this.state.taras.computer=this.getComputerTaraCountFromStorage(),this.state.roundNumber=this.getRoundNumberFromStorage()}doesMoveBeat(e,t){var o,a;return null!==(a=null===(o=r.get(e))||void 0===o?void 0:o.beats.includes(t))&&void 0!==a&&a}handleRoundWin(e,t){if(this.setScore(e,this.getScore(e)+1),this.isStandardMove(t)){let t=this.getTaraCount(e);t<3&&this.setTaraCount(e,t+1)}}evaluateRound(){let t=this.getPlayerMove(),o=this.getComputerMove();return null===t||null===o?"Invalid round":(this.handleTaraMove(e.PLAYER,t),this.handleTaraMove(e.COMPUTER,o),t===o)?"It's a tie!":this.doesMoveBeat(t,o)?(this.handleRoundWin(e.PLAYER,t),"You win!"):(this.handleRoundWin(e.COMPUTER,o),"Computer wins!")}setScore(e,t){this.state.scores[e]=t,localStorage.setItem(`${e}Score`,t.toString())}getScoreFromStorage(e){return parseInt(localStorage.getItem(`${e}Score`)||"0",10)}getPlayerScoreFromStorage(){return this.getScoreFromStorage(e.PLAYER)}getComputerScoreFromStorage(){return this.getScoreFromStorage(e.COMPUTER)}getScore(e){return this.state.scores[e]}setPlayerScore(t){this.setScore(e.PLAYER,t)}setComputerScore(t){this.setScore(e.COMPUTER,t)}getPlayerScore(){return this.getScore(e.PLAYER)}getComputerScore(){return this.getScore(e.COMPUTER)}resetScores(){this.setPlayerScore(0),this.setComputerScore(0)}isStandardMove(e){return e!==t.TARA}setMove(e,t){this.state.moves[e]=t}getMove(e){return this.state.moves[e]}setPlayerMove(t){this.setMove(e.PLAYER,t)}getPlayerMove(){return this.getMove(e.PLAYER)}setComputerMove(t){this.setMove(e.COMPUTER,t)}getComputerMove(){return this.getMove(e.COMPUTER)}resetMoves(){this.setPlayerMove(null),this.setComputerMove(null)}chooseComputerMove(){let e=Array.from((this.getComputerTaraCount()>0?r:a).keys()),t=Math.floor(Math.random()*e.length),o=e[t];this.setComputerMove(o)}getRoundNumberFromStorage(){return parseInt(localStorage.getItem("roundNumber")||"1",10)}getRoundNumber(){return this.state.roundNumber}setRoundNumber(e){this.state.roundNumber=e,localStorage.setItem("roundNumber",e.toString())}increaseRoundNumber(){this.setRoundNumber(this.getRoundNumber()+1)}resetRoundNumber(){this.setRoundNumber(1)}getTaraCountFromStorage(e){return parseInt(localStorage.getItem(`${e}TaraCount`)||"0",10)}getPlayerTaraCountFromStorage(){return this.getTaraCountFromStorage(e.PLAYER)}getComputerTaraCountFromStorage(){return this.getTaraCountFromStorage(e.COMPUTER)}decrementTaraCount(e){let t=this.getTaraCount(e);t>0&&this.setTaraCount(e,t-1)}handleTaraMove(e,o){o===t.TARA&&(this.getTaraCount(e)>0?this.decrementTaraCount(e):this.setMove(e,t.ROCK))}setTaraCount(e,t){this.state.taras[e]=t,localStorage.setItem(`${e}TaraCount`,t.toString())}getTaraCount(e){return this.state.taras[e]}setPlayerTaraCount(t){this.setTaraCount(e.PLAYER,t)}setComputerTaraCount(t){this.setTaraCount(e.COMPUTER,t)}resetTaras(){this.setPlayerTaraCount(0),this.setComputerTaraCount(0)}getPlayerTaraCount(){return this.getTaraCount(e.PLAYER)}getComputerTaraCount(){return this.getTaraCount(e.COMPUTER)}taraIsEnabled(){return this.getTaraCount(e.PLAYER)>0}}class n{constructor(){this.messageEl=document.getElementById("message"),this.playerScoreEl=document.getElementById("player-score"),this.computerScoreEl=document.getElementById("computer-score"),this.movesEl=document.getElementById("round-moves"),this.resultEl=document.getElementById("round-result"),this.taraBtn=document.getElementById("tara")}updateMessage(e){this.messageEl&&(this.messageEl.textContent=e)}toggleStartButton(e){let t=document.getElementById("start-game");t&&(t.style.display=e?"inline":"none")}updateRound(e){let t=document.getElementById("round");t&&(t.textContent=`Round ${e}`,t.style.display="block")}showRoundOutcome(e,t,o){this.movesEl.textContent=`You played ${e}. Computer played ${t}.`,this.resultEl.textContent=o.toUpperCase(),this.movesEl.style.display="block",this.resultEl.style.display="block"}toggleResetGameState(e){let t=document.getElementById("reset-game-state");t&&(t.style.display=e?"inline-block":"none")}toggleMoveButtons(e){Object.values(t).forEach(t=>{let o=document.getElementById(t);o&&(o.style.display=e?"inline":"none")})}togglePlayAgain(e){let t=document.getElementById("play-again");t&&(t.style.display=e?"inline-block":"none")}resetForNextRound(){this.toggleMoveButtons(!0),this.togglePlayAgain(!1),this.movesEl.style.display="none",this.resultEl.style.display="none"}updateScores(e,t){this.playerScoreEl&&(this.playerScoreEl.textContent=e.toString()),this.computerScoreEl&&(this.computerScoreEl.textContent=t.toString())}updateTaraCounts(e,t){document.getElementById("player-tara").textContent=e.toString(),document.getElementById("computer-tara").textContent=t.toString()}updateTaraButton(e,t){this.taraBtn instanceof HTMLButtonElement&&(this.taraBtn.disabled=!e),this.taraBtn.textContent=`Tara (x${t})`}}class i{constructor(e,t){this.model=e,this.view=t}updateScoreView(){this.view.updateScores(this.model.getPlayerScore(),this.model.getComputerScore())}updateTaraView(){this.view.updateTaraCounts(this.model.getPlayerTaraCount(),this.model.getComputerTaraCount())}updateTaraButtonView(){let e=this.model.taraIsEnabled(),t=this.model.getPlayerTaraCount();this.view.updateTaraButton(e,t)}startGame(){this.view.toggleStartButton(!1),this.view.toggleResetGameState(!1),this.view.toggleMoveButtons(!0),this.view.updateRound(this.model.getRoundNumber())}endRound(){let e=this.model.getPlayerMove(),t=this.model.getComputerMove(),o=this.model.evaluateRound();this.view.showRoundOutcome(e,t,o),this.view.toggleMoveButtons(!1),this.view.togglePlayAgain(!0),this.model.increaseRoundNumber(),this.updateScoreView(),this.updateTaraView(),this.updateTaraButtonView()}handleNextRound(){this.view.updateRound(this.model.getRoundNumber()),this.view.resetForNextRound()}resetGameState(){this.model.resetScores(),this.model.resetMoves(),this.model.resetTaras(),this.model.resetRoundNumber(),this.updateScoreView(),this.updateTaraView(),this.updateTaraButtonView()}handlePlayerMove(e){this.model.resetMoves(),this.model.setPlayerMove(e),this.model.chooseComputerMove(),this.endRound()}initialize(){var e,o,r;this.view.updateMessage("Rock, Paper, Scissors, Tara"),this.updateScoreView(),this.updateTaraView(),this.updateTaraButtonView(),this.view.toggleMoveButtons(!1),this.view.togglePlayAgain(!1),this.view.toggleStartButton(!0),null===(e=document.getElementById("start-game"))||void 0===e||e.addEventListener("click",()=>this.startGame()),null===(o=document.getElementById("play-again"))||void 0===o||o.addEventListener("click",()=>this.handleNextRound()),Object.values(t).forEach(e=>{var t;null===(t=document.getElementById(e))||void 0===t||t.addEventListener("click",()=>this.handlePlayerMove(e))}),null===(r=document.getElementById("reset-game-state"))||void 0===r||r.addEventListener("click",()=>this.resetGameState())}}document.addEventListener("DOMContentLoaded",()=>{new i(new s,new n).initialize()});
//# sourceMappingURL=public.cc0abac3.js.map
