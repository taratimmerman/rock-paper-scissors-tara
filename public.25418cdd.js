const t=[{name:"rock",beats:["scissors"]},{name:"paper",beats:["rock"]},{name:"scissors",beats:["paper"]},{name:"tara",beats:["rock","paper","scissors"]}],e=new Map(t.map(t=>[t.name,t]));t.filter(t=>"tara"!==t.name).map(t=>[t.name,t]);class o{constructor(){this.state={scores:{player:0,computer:0},moves:{player:null,computer:null},taras:{player:0,computer:0},roundNumber:1},this.state.scores.player=this.getScoreFromStorage("player"),this.state.scores.computer=this.getScoreFromStorage("computer"),this.state.taras.player=this.getTaraCountFromStorage("player"),this.state.taras.computer=this.getTaraCountFromStorage("computer"),this.state.roundNumber=this.getRoundNumberFromStorage()}doesMoveBeat(t,o){var a,s;return null!==(s=null===(a=e.get(t))||void 0===a?void 0:a.beats.includes(o))&&void 0!==s&&s}handleRoundWin(t,e){if(this.setScore(t,this.getScore(t)+1),this.isStandardMove(e)){let e=this.getTaraCount(t);e<3&&this.setTaraCount(t,e+1)}}evaluateRound(){let t=this.getPlayerMove(),e=this.getComputerMove();return null===t||null===e?"Invalid round":(this.handleTaraMove("player",t),this.handleTaraMove("computer",e),t===e)?"It's a tie!":this.doesMoveBeat(t,e)?(this.handleRoundWin("player",t),"You win!"):(this.handleRoundWin("computer",e),"Computer wins!")}getScoreFromStorage(t){return parseInt(localStorage.getItem(`${t}Score`)||"0",10)}getScore(t){return this.state.scores[t]}setScore(t,e){this.state.scores[t]=e,localStorage.setItem(`${t}Score`,e.toString())}setPlayerMove(t){this.state.moves.player=t}getPlayerMove(){return this.state.moves.player}resetMoves(){this.state.moves.player=null,this.state.moves.computer=null}setComputerMove(t){this.state.moves.computer=t}getComputerMove(){return this.state.moves.computer}chooseComputerMove(){let e=Math.floor(Math.random()*t.length);this.setComputerMove(t[e].name)}isStandardMove(t){return"tara"!==t}getRoundNumberFromStorage(){return parseInt(localStorage.getItem("roundNumber")||"1",10)}getRoundNumber(){return this.state.roundNumber}setRoundNumber(t){this.state.roundNumber=t,localStorage.setItem("roundNumber",t.toString())}increaseRoundNumber(){this.setRoundNumber(this.getRoundNumber()+1)}getTaraCountFromStorage(t){return parseInt(localStorage.getItem(`${t}TaraCount`)||"0",10)}decrementTaraCount(t){let e=this.getTaraCount(t);e>0&&this.setTaraCount(t,e-1)}handleTaraMove(t,e){"tara"===e&&this.decrementTaraCount(t)}getTaraCount(t){return this.state.taras[t]}setTaraCount(t,e){this.state.taras[t]=e,localStorage.setItem(`${t}TaraCount`,e.toString())}taraIsEnabled(){return this.getTaraCount("player")>0}}class a{constructor(){this.messageEl=document.getElementById("message"),this.playerScoreEl=document.getElementById("player-score"),this.computerScoreEl=document.getElementById("computer-score"),this.movesEl=document.getElementById("round-moves"),this.resultEl=document.getElementById("round-result"),this.taraBtn=document.getElementById("tara")}updateMessage(t){this.messageEl&&(this.messageEl.textContent=t)}toggleStartButton(t){let e=document.getElementById("start-game");e&&(e.style.display=t?"inline":"none")}updateRound(t){let e=document.getElementById("round");e&&(e.textContent=`Round ${t}`,e.style.display="block")}showRoundOutcome(t,e,o){this.movesEl.textContent=`You played ${t}. Computer played ${e}.`,this.resultEl.textContent=o.toUpperCase(),this.movesEl.style.display="block",this.resultEl.style.display="block"}toggleMoveButtons(e){t.forEach(({name:t})=>{let o=document.getElementById(t);o&&(o.style.display=e?"inline":"none")})}togglePlayAgain(t){let e=document.getElementById("play-again");e&&(e.style.display=t?"inline-block":"none")}resetForNextRound(){this.toggleMoveButtons(!0),this.togglePlayAgain(!1),this.movesEl.style.display="none",this.resultEl.style.display="none"}updateScores(t,e){this.playerScoreEl&&(this.playerScoreEl.textContent=t.toString()),this.computerScoreEl&&(this.computerScoreEl.textContent=e.toString())}updateTaraCounts(t,e){document.getElementById("player-tara").textContent=t.toString(),document.getElementById("computer-tara").textContent=e.toString()}updateTaraButton(t,e){this.taraBtn instanceof HTMLButtonElement&&(this.taraBtn.disabled=!t),this.taraBtn.textContent=`Tara (x${e})`}}class s{constructor(t,e){this.model=t,this.view=e}updateScoreView(){this.view.updateScores(this.model.getScore("player"),this.model.getScore("computer"))}updateTaraView(){this.view.updateTaraCounts(this.model.getTaraCount("player"),this.model.getTaraCount("computer"))}updateTaraButtonView(){let t=this.model.taraIsEnabled(),e=this.model.getTaraCount("player");this.view.updateTaraButton(t,e)}startGame(){this.view.toggleStartButton(!1),this.view.toggleMoveButtons(!0),this.view.updateRound(this.model.getRoundNumber())}endRound(){let t=this.model.getPlayerMove(),e=this.model.getComputerMove(),o=this.model.evaluateRound();this.view.showRoundOutcome(t,e,o),this.view.toggleMoveButtons(!1),this.view.togglePlayAgain(!0),this.model.increaseRoundNumber(),this.updateScoreView(),this.updateTaraView(),this.updateTaraButtonView()}handlePlayerMove(t){this.model.setPlayerMove(t),this.model.chooseComputerMove(),this.endRound()}handleNextRound(){this.view.updateRound(this.model.getRoundNumber()),this.view.resetForNextRound()}initialize(){var e,o;this.view.updateMessage("Rock, Paper, Scissors, Tara"),this.updateScoreView(),this.updateTaraView(),this.updateTaraButtonView(),this.view.toggleMoveButtons(!1),this.view.togglePlayAgain(!1),this.view.toggleStartButton(!0),null===(e=document.getElementById("start-game"))||void 0===e||e.addEventListener("click",()=>this.startGame()),null===(o=document.getElementById("play-again"))||void 0===o||o.addEventListener("click",()=>this.handleNextRound()),t.map(t=>t.name).forEach(t=>{var e;null===(e=document.getElementById(t))||void 0===e||e.addEventListener("click",()=>this.handlePlayerMove(t))})}}document.addEventListener("DOMContentLoaded",()=>{new s(new o,new a).initialize()});
//# sourceMappingURL=public.25418cdd.js.map
